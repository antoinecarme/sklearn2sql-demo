-- This SQL code was generated by scikit2sql (development version).
-- Copyright 2017

WITH linear_model_cte AS 
(SELECT [ADS].[KEY] AS [KEY], -0.26118297946258134 * [ADS].[Feature_0] + -0.32383483563271154 * [ADS].[Feature_1] + 0.1563099452889869 * [ADS].[Feature_2] + 0.24072836513295776 * [ADS].[Feature_3] + 0.09648559817349266 * [ADS].[Feature_4] + 0.2981329471267248 * [ADS].[Feature_5] + -0.1896962706235801 * [ADS].[Feature_6] + -0.08998401944360092 * [ADS].[Feature_7] + 0.23594509493468155 * [ADS].[Feature_8] + -0.012425927484649513 * [ADS].[Feature_9] + 0.32053402703340583 * [ADS].[Feature_10] + 0.07329300686453048 * [ADS].[Feature_11] + 0.0895918007051858 * [ADS].[Feature_12] + 0.1563268053018569 * [ADS].[Feature_13] + -0.16901178913374323 * [ADS].[Feature_14] + 0.14693838408322357 * [ADS].[Feature_15] + -0.03531286595090337 * [ADS].[Feature_16] + -0.14869120078988168 * [ADS].[Feature_17] + 0.03363309126076129 * [ADS].[Feature_18] + 0.19470507821354702 * [ADS].[Feature_19] + -0.02441736139127517 * [ADS].[Feature_20] + 0.013460744877191271 * [ADS].[Feature_21] + -0.16120794647189063 * [ADS].[Feature_22] + 0.16361511002975918 * [ADS].[Feature_23] + 0.06145496906628905 * [ADS].[Feature_24] + -0.07756742037418353 * [ADS].[Feature_25] + 0.23456258821679712 * [ADS].[Feature_26] + 0.04069878672743656 * [ADS].[Feature_27] + -0.26381226447845574 * [ADS].[Feature_28] + 0.04276843586782301 * [ADS].[Feature_29] + 0.05609823705543837 * [ADS].[Feature_30] + 0.2691065816133025 * [ADS].[Feature_31] + -0.2624419248992971 * [ADS].[Feature_32] + -0.39132304622109215 * [ADS].[Feature_33] + -0.273798218883671 * [ADS].[Feature_34] + -0.05312541086363096 * [ADS].[Feature_35] + -0.1490442361044973 * [ADS].[Feature_36] + -0.32626634765163914 * [ADS].[Feature_37] + 0.08915819632215705 * [ADS].[Feature_38] + -0.010142854517520108 * [ADS].[Feature_39] + -0.17352767968161872 * [ADS].[Feature_40] + -0.052682444909656914 * [ADS].[Feature_41] + -0.1825208203943992 * [ADS].[Feature_42] + 0.2886889722560609 * [ADS].[Feature_43] + 0.14503729679169625 * [ADS].[Feature_44] + 0.3039142832863682 * [ADS].[Feature_45] + 0.009718035551099749 * [ADS].[Feature_46] + -0.2641819703970335 * [ADS].[Feature_47] + -0.005779205578962032 * [ADS].[Feature_48] + -0.24211247429475743 * [ADS].[Feature_49] + 0.05696487128650845 * [ADS].[Feature_50] + -0.1012424159098221 * [ADS].[Feature_51] + -0.030216450776972652 * [ADS].[Feature_52] + -0.21762903632818822 * [ADS].[Feature_53] + 0.06901069373400343 * [ADS].[Feature_54] + 0.08372892732063444 * [ADS].[Feature_55] + 0.09972954858385116 * [ADS].[Feature_56] + -0.1936802528056973 * [ADS].[Feature_57] + 0.0024217103014855584 * [ADS].[Feature_58] + -0.17816690660038667 * [ADS].[Feature_59] + -0.009349899528009213 * [ADS].[Feature_60] + -0.1840774016930655 * [ADS].[Feature_61] + 0.03380422280441279 * [ADS].[Feature_62] + 0.15953420298473686 * [ADS].[Feature_63] + 0.05249419148837749 * [ADS].[Feature_64] + 0.018276704010419486 * [ADS].[Feature_65] + 0.23359297117347794 * [ADS].[Feature_66] + -0.22604157860882323 * [ADS].[Feature_67] + 0.07860887372260571 * [ADS].[Feature_68] + 0.072545994732559 * [ADS].[Feature_69] + 0.02767310775610159 * [ADS].[Feature_70] + 0.051609806198199944 * [ADS].[Feature_71] + 0.005633376276524101 * [ADS].[Feature_72] + -0.22606275482865792 * [ADS].[Feature_73] + 0.05477043848082387 * [ADS].[Feature_74] + -0.13141499665097173 * [ADS].[Feature_75] + -0.08397102884440973 * [ADS].[Feature_76] + -0.11377006643441151 * [ADS].[Feature_77] + -0.08143873969821648 * [ADS].[Feature_78] + 0.3241537584829916 * [ADS].[Feature_79] + 0.4497918531377108 * [ADS].[Feature_80] + -0.42209751066161455 * [ADS].[Feature_81] + 0.22045551185957085 * [ADS].[Feature_82] + 0.058727343603192386 * [ADS].[Feature_83] + 0.1870820594917352 * [ADS].[Feature_84] + -0.3613577381873842 * [ADS].[Feature_85] + 0.08938981017128966 * [ADS].[Feature_86] + -0.3745790339848498 * [ADS].[Feature_87] + 0.09083526196959955 * [ADS].[Feature_88] + 0.08741441451439665 * [ADS].[Feature_89] + 0.17134798066921825 * [ADS].[Feature_90] + 0.09621043849213234 * [ADS].[Feature_91] + -0.041811523969119684 * [ADS].[Feature_92] + -0.09652759733207766 * [ADS].[Feature_93] + -0.07462628534748693 * [ADS].[Feature_94] + 0.09166886681998843 * [ADS].[Feature_95] + -0.09218307147813691 * [ADS].[Feature_96] + -0.11791092174463502 * [ADS].[Feature_97] + -0.04594939741737998 * [ADS].[Feature_98] + 0.005645779387158498 * [ADS].[Feature_99] + -0.727498206664 AS [Score_0], -0.14501757523072292 * [ADS].[Feature_0] + 0.36664250141355137 * [ADS].[Feature_1] + -0.04309050778542432 * [ADS].[Feature_2] + 0.10041632984154211 * [ADS].[Feature_3] + -0.1943179474156588 * [ADS].[Feature_4] + 0.24598134330777555 * [ADS].[Feature_5] + 0.04628161301772698 * [ADS].[Feature_6] + -0.1631096164005263 * [ADS].[Feature_7] + 0.25303512369810816 * [ADS].[Feature_8] + -0.17943120893694747 * [ADS].[Feature_9] + -0.060212056980447765 * [ADS].[Feature_10] + 0.07269817291584954 * [ADS].[Feature_11] + 0.17580068651203604 * [ADS].[Feature_12] + 0.057809603645109876 * [ADS].[Feature_13] + 0.504872358097573 * [ADS].[Feature_14] + 0.05574413570479763 * [ADS].[Feature_15] + -0.09725459525444782 * [ADS].[Feature_16] + 0.25034917276890123 * [ADS].[Feature_17] + 0.06922064122128939 * [ADS].[Feature_18] + -0.13133482047789397 * [ADS].[Feature_19] + 0.03320256874125512 * [ADS].[Feature_20] + -0.10080661942860651 * [ADS].[Feature_21] + 0.028857295614752053 * [ADS].[Feature_22] + -0.06091122853015165 * [ADS].[Feature_23] + 0.00032561372979861183 * [ADS].[Feature_24] + -0.386645293727449 * [ADS].[Feature_25] + 0.05647550782659668 * [ADS].[Feature_26] + -0.08657244196034802 * [ADS].[Feature_27] + -0.14206984791113464 * [ADS].[Feature_28] + 0.0642660372856122 * [ADS].[Feature_29] + 0.04020638820056961 * [ADS].[Feature_30] + -0.01260015019389669 * [ADS].[Feature_31] + 0.18214598762088238 * [ADS].[Feature_32] + 0.008915107556103266 * [ADS].[Feature_33] + 0.3198241479959368 * [ADS].[Feature_34] + -0.04060005608524771 * [ADS].[Feature_35] + -0.22847995767730792 * [ADS].[Feature_36] + -0.0013548512702471667 * [ADS].[Feature_37] + -0.058188528921005366 * [ADS].[Feature_38] + 0.14734008392827502 * [ADS].[Feature_39] + 0.15911070219468515 * [ADS].[Feature_40] + -0.15916725254090192 * [ADS].[Feature_41] + -0.10120009045183648 * [ADS].[Feature_42] + 0.018725940302828932 * [ADS].[Feature_43] + -0.2619561641592442 * [ADS].[Feature_44] + -0.05259107531723692 * [ADS].[Feature_45] + 0.1522983428357878 * [ADS].[Feature_46] + 0.04739074692507386 * [ADS].[Feature_47] + -0.22476528574640747 * [ADS].[Feature_48] + 0.17676514651832625 * [ADS].[Feature_49] + -0.06402815085117002 * [ADS].[Feature_50] + 0.095658320055633 * [ADS].[Feature_51] + -0.17153478099330088 * [ADS].[Feature_52] + -0.2259642142992755 * [ADS].[Feature_53] + 0.1763230792557911 * [ADS].[Feature_54] + -0.02040763377613511 * [ADS].[Feature_55] + -0.010218242360278983 * [ADS].[Feature_56] + -0.1858725184345584 * [ADS].[Feature_57] + -0.10779021142526128 * [ADS].[Feature_58] + -0.03058194939065977 * [ADS].[Feature_59] + -0.04199985870629439 * [ADS].[Feature_60] + 0.05180010685539931 * [ADS].[Feature_61] + 0.11497684443188251 * [ADS].[Feature_62] + -0.011666649615415539 * [ADS].[Feature_63] + -0.01737840423904612 * [ADS].[Feature_64] + -0.17521407543044984 * [ADS].[Feature_65] + 0.009988187845199756 * [ADS].[Feature_66] + 0.4082107233550863 * [ADS].[Feature_67] + -0.012905114716100752 * [ADS].[Feature_68] + 0.02208223324243565 * [ADS].[Feature_69] + -0.1999252053563974 * [ADS].[Feature_70] + -0.353092395008402 * [ADS].[Feature_71] + 0.0389543504500118 * [ADS].[Feature_72] + 0.03924195325527262 * [ADS].[Feature_73] + 0.1369148100867815 * [ADS].[Feature_74] + 0.3301158745378311 * [ADS].[Feature_75] + -0.04360776986266416 * [ADS].[Feature_76] + 0.03923468481567828 * [ADS].[Feature_77] + -0.2721644642989226 * [ADS].[Feature_78] + 0.4887083808648203 * [ADS].[Feature_79] + 0.32258803061529845 * [ADS].[Feature_80] + 0.21388934669460108 * [ADS].[Feature_81] + -0.012974227014980156 * [ADS].[Feature_82] + -0.3611286268671358 * [ADS].[Feature_83] + -0.0033104977895784264 * [ADS].[Feature_84] + -0.05147495282747057 * [ADS].[Feature_85] + 0.31881050490005797 * [ADS].[Feature_86] + -0.1630845133460057 * [ADS].[Feature_87] + 0.03606345371222355 * [ADS].[Feature_88] + -0.14131869661350493 * [ADS].[Feature_89] + -0.2459973053106779 * [ADS].[Feature_90] + 0.10251867062015896 * [ADS].[Feature_91] + 0.2986312135753365 * [ADS].[Feature_92] + -0.15217484694858435 * [ADS].[Feature_93] + 0.21815848748838507 * [ADS].[Feature_94] + 0.1745646838370751 * [ADS].[Feature_95] + 0.17370292300180296 * [ADS].[Feature_96] + -0.1574649679008949 * [ADS].[Feature_97] + -0.14786555293611406 * [ADS].[Feature_98] + -0.04370561315416818 * [ADS].[Feature_99] + -0.48335255028 AS [Score_1], 0.46659760777978915 * [ADS].[Feature_0] + -0.08709133966306168 * [ADS].[Feature_1] + 0.0316169966601154 * [ADS].[Feature_2] + -0.22395653921856007 * [ADS].[Feature_3] + 0.43607417160239864 * [ADS].[Feature_4] + 0.17459205169715106 * [ADS].[Feature_5] + -0.018365749494939975 * [ADS].[Feature_6] + 0.029263506645075283 * [ADS].[Feature_7] + 0.26558422564672085 * [ADS].[Feature_8] + 0.06275913404005923 * [ADS].[Feature_9] + -0.07575505683393226 * [ADS].[Feature_10] + -0.3492462085146527 * [ADS].[Feature_11] + -0.047795782261883094 * [ADS].[Feature_12] + 0.018247104517657278 * [ADS].[Feature_13] + -0.07035195815545568 * [ADS].[Feature_14] + -0.1763221508280487 * [ADS].[Feature_15] + -0.20888624949887669 * [ADS].[Feature_16] + -0.3458351316608099 * [ADS].[Feature_17] + -0.363264945170149 * [ADS].[Feature_18] + -0.3702317457835609 * [ADS].[Feature_19] + -0.003913115213200753 * [ADS].[Feature_20] + 0.0005679631549008662 * [ADS].[Feature_21] + -0.34111609867764875 * [ADS].[Feature_22] + -0.25406214343638706 * [ADS].[Feature_23] + -0.06250593361003443 * [ADS].[Feature_24] + -0.2030072325387728 * [ADS].[Feature_25] + -0.05812450581752134 * [ADS].[Feature_26] + -0.06966095268150269 * [ADS].[Feature_27] + 0.3306497048237653 * [ADS].[Feature_28] + 0.009257542538021517 * [ADS].[Feature_29] + -0.1278627493833543 * [ADS].[Feature_30] + 0.10205371300345199 * [ADS].[Feature_31] + 0.4653419242333275 * [ADS].[Feature_32] + 0.31230606750247597 * [ADS].[Feature_33] + -0.017050887697402848 * [ADS].[Feature_34] + 0.018866460001591416 * [ADS].[Feature_35] + -0.11487213325733517 * [ADS].[Feature_36] + 0.054754765491227764 * [ADS].[Feature_37] + -0.15131903268400893 * [ADS].[Feature_38] + -0.13187551007738954 * [ADS].[Feature_39] + 0.24975319987113398 * [ADS].[Feature_40] + 0.03135381557577066 * [ADS].[Feature_41] + -0.09124481507134126 * [ADS].[Feature_42] + -0.07563095728947992 * [ADS].[Feature_43] + 0.23455465880333098 * [ADS].[Feature_44] + -0.01595296009107518 * [ADS].[Feature_45] + 0.16314519195204427 * [ADS].[Feature_46] + -0.10279665759848776 * [ADS].[Feature_47] + -0.17755280714097454 * [ADS].[Feature_48] + 0.22012212080525032 * [ADS].[Feature_49] + -0.13515392082504907 * [ADS].[Feature_50] + -0.09231089879439737 * [ADS].[Feature_51] + -0.4374458230514796 * [ADS].[Feature_52] + 0.2824274568947781 * [ADS].[Feature_53] + 0.0021401433400980046 * [ADS].[Feature_54] + -0.019653205681616832 * [ADS].[Feature_55] + 0.09510314296605318 * [ADS].[Feature_56] + -0.034523538721046396 * [ADS].[Feature_57] + 0.4836464165025645 * [ADS].[Feature_58] + -0.3480323150717509 * [ADS].[Feature_59] + 0.12247394932501178 * [ADS].[Feature_60] + -0.36814383723815836 * [ADS].[Feature_61] + 0.10601292792037041 * [ADS].[Feature_62] + -0.3171631409865289 * [ADS].[Feature_63] + -0.14020814841419096 * [ADS].[Feature_64] + 0.15747551577372654 * [ADS].[Feature_65] + -0.013183209225077963 * [ADS].[Feature_66] + -0.03529398908506589 * [ADS].[Feature_67] + -0.16648981250529402 * [ADS].[Feature_68] + 0.0826586181433366 * [ADS].[Feature_69] + 0.010073586293124897 * [ADS].[Feature_70] + 0.020419258600386007 * [ADS].[Feature_71] + 0.12022881884664285 * [ADS].[Feature_72] + 0.36870144556632817 * [ADS].[Feature_73] + 0.19182178954560908 * [ADS].[Feature_74] + -0.0009381453881044603 * [ADS].[Feature_75] + 0.3074864602986614 * [ADS].[Feature_76] + -0.11385511587525296 * [ADS].[Feature_77] + -0.18580474490950732 * [ADS].[Feature_78] + 0.03526394621606154 * [ADS].[Feature_79] + 0.16243990620814439 * [ADS].[Feature_80] + -0.1281463222411568 * [ADS].[Feature_81] + -0.35894759306655283 * [ADS].[Feature_82] + 0.21878459949816498 * [ADS].[Feature_83] + -0.43738930812974114 * [ADS].[Feature_84] + -0.16385302183379868 * [ADS].[Feature_85] + 0.05398522165649547 * [ADS].[Feature_86] + -0.015242500241180151 * [ADS].[Feature_87] + -0.13377978337975496 * [ADS].[Feature_88] + 0.23154195805388186 * [ADS].[Feature_89] + 0.1854152866918931 * [ADS].[Feature_90] + 0.17633778726061453 * [ADS].[Feature_91] + -0.1500795214281743 * [ADS].[Feature_92] + -0.10087897350302333 * [ADS].[Feature_93] + 0.18787639476540666 * [ADS].[Feature_94] + -0.0771820246265592 * [ADS].[Feature_95] + -0.14431459811330463 * [ADS].[Feature_96] + 0.022434498272631765 * [ADS].[Feature_97] + -0.16030196543047226 * [ADS].[Feature_98] + -0.05034949625553736 * [ADS].[Feature_99] + -0.565645147415 AS [Score_2], 0.11514300948085499 * [ADS].[Feature_0] + 0.23055033993788415 * [ADS].[Feature_1] + -0.21342726289379993 * [ADS].[Feature_2] + 0.21478581380258055 * [ADS].[Feature_3] + -0.25669197597807636 * [ADS].[Feature_4] + 0.053379327529024884 * [ADS].[Feature_5] + 0.12536792578958686 * [ADS].[Feature_6] + 0.12592092127642057 * [ADS].[Feature_7] + 0.16028035512986225 * [ADS].[Feature_8] + 0.20369416470286575 * [ADS].[Feature_9] + -0.10570370688376073 * [ADS].[Feature_10] + 0.4450290504762773 * [ADS].[Feature_11] + -0.09809500590786181 * [ADS].[Feature_12] + 0.04583955401166801 * [ADS].[Feature_13] + -0.009964465669746451 * [ADS].[Feature_14] + -0.10505026862180523 * [ADS].[Feature_15] + 0.17582071297590907 * [ADS].[Feature_16] + -0.11495915919010471 * [ADS].[Feature_17] + -0.07950789264787175 * [ADS].[Feature_18] + -0.07969561117111398 * [ADS].[Feature_19] + -0.03643501160569535 * [ADS].[Feature_20] + 0.111353744583934 * [ADS].[Feature_21] + 0.2880762909429913 * [ADS].[Feature_22] + 0.06176433171213631 * [ADS].[Feature_23] + -0.04964695192637059 * [ADS].[Feature_24] + 0.02737526420551976 * [ADS].[Feature_25] + -0.194885477945356 * [ADS].[Feature_26] + 0.02284023325406623 * [ADS].[Feature_27] + 0.3548264881493794 * [ADS].[Feature_28] + 0.08609150520499048 * [ADS].[Feature_29] + 0.07545694363558322 * [ADS].[Feature_30] + 0.4081161175733927 * [ADS].[Feature_31] + -0.006182065359588203 * [ADS].[Feature_32] + -0.12996220086310398 * [ADS].[Feature_33] + -0.14836635669399176 * [ADS].[Feature_34] + -0.1442599173999191 * [ADS].[Feature_35] + -0.12986769205115606 * [ADS].[Feature_36] + 0.45802478950399006 * [ADS].[Feature_37] + -0.02185123083050693 * [ADS].[Feature_38] + 0.08521620197823235 * [ADS].[Feature_39] + -0.052501842299445815 * [ADS].[Feature_40] + -0.2852983725016771 * [ADS].[Feature_41] + -0.03631802148490445 * [ADS].[Feature_42] + -0.03210713393078718 * [ADS].[Feature_43] + -0.12250018186576747 * [ADS].[Feature_44] + 0.10657853861396716 * [ADS].[Feature_45] + 0.20531800554582583 * [ADS].[Feature_46] + 0.02678030327537973 * [ADS].[Feature_47] + -0.4218116195451692 * [ADS].[Feature_48] + -0.22081217019983915 * [ADS].[Feature_49] + -0.07779400621141017 * [ADS].[Feature_50] + -0.0835766365651452 * [ADS].[Feature_51] + 0.02223557966834173 * [ADS].[Feature_52] + -0.25741195196414474 * [ADS].[Feature_53] + -0.1827850578770863 * [ADS].[Feature_54] + 0.19587634141229238 * [ADS].[Feature_55] + -0.2504451040701811 * [ADS].[Feature_56] + -0.23606609845119372 * [ADS].[Feature_57] + -0.15132732284715117 * [ADS].[Feature_58] + 0.05140068937033877 * [ADS].[Feature_59] + 0.06738066845044671 * [ADS].[Feature_60] + -0.17448849852385248 * [ADS].[Feature_61] + -0.14161749929218004 * [ADS].[Feature_62] + -0.003461464663554314 * [ADS].[Feature_63] + -0.012675155148265152 * [ADS].[Feature_64] + -0.0594523821793262 * [ADS].[Feature_65] + 0.3550344964676858 * [ADS].[Feature_66] + 0.05680062912027772 * [ADS].[Feature_67] + -0.27140243988276225 * [ADS].[Feature_68] + 0.05665110179820226 * [ADS].[Feature_69] + 0.10047998708277217 * [ADS].[Feature_70] + -0.08444100072826793 * [ADS].[Feature_71] + 0.29384057365970984 * [ADS].[Feature_72] + -0.3393189713459988 * [ADS].[Feature_73] + 0.16683808081023044 * [ADS].[Feature_74] + 0.3942527674278068 * [ADS].[Feature_75] + -0.15197451668641118 * [ADS].[Feature_76] + -0.044007606104830115 * [ADS].[Feature_77] + 0.40549096645316074 * [ADS].[Feature_78] + -0.12218980519457619 * [ADS].[Feature_79] + -0.15847161778620344 * [ADS].[Feature_80] + 0.01423068776370076 * [ADS].[Feature_81] + 0.6064912599154979 * [ADS].[Feature_82] + 0.517354896249565 * [ADS].[Feature_83] + 0.3383483130158653 * [ADS].[Feature_84] + 0.03455735560170811 * [ADS].[Feature_85] + 0.21206856767801635 * [ADS].[Feature_86] + -0.0962001955333888 * [ADS].[Feature_87] + -0.04884381918880743 * [ADS].[Feature_88] + -0.23799585748499985 * [ADS].[Feature_89] + 0.04285495377820396 * [ADS].[Feature_90] + -0.040779234956424215 * [ADS].[Feature_91] + 0.06408709102712283 * [ADS].[Feature_92] + -0.03207689881310375 * [ADS].[Feature_93] + -0.07730724565404373 * [ADS].[Feature_94] + 0.33670144586409 * [ADS].[Feature_95] + -0.3352917192517883 * [ADS].[Feature_96] + -0.027799955753998358 * [ADS].[Feature_97] + -0.1246817465285853 * [ADS].[Feature_98] + 0.03610884018512966 * [ADS].[Feature_99] + -0.590683971544 AS [Score_3] 
FROM [FourClass_100] AS [ADS]), 
orig_cte AS 
(SELECT linear_model_cte.[KEY] AS [KEY], linear_model_cte.[Score_0] AS [Score_0], linear_model_cte.[Score_1] AS [Score_1], linear_model_cte.[Score_2] AS [Score_2], linear_model_cte.[Score_3] AS [Score_3], (1.0 / (1.0 + exp(-linear_model_cte.[Score_0]))) / (1.0 / (1.0 + exp(-linear_model_cte.[Score_0])) + 1.0 / (1.0 + exp(-linear_model_cte.[Score_1])) + 1.0 / (1.0 + exp(-linear_model_cte.[Score_2])) + 1.0 / (1.0 + exp(-linear_model_cte.[Score_3]))) AS [Proba_0], (1.0 / (1.0 + exp(-linear_model_cte.[Score_1]))) / (1.0 / (1.0 + exp(-linear_model_cte.[Score_0])) + 1.0 / (1.0 + exp(-linear_model_cte.[Score_1])) + 1.0 / (1.0 + exp(-linear_model_cte.[Score_2])) + 1.0 / (1.0 + exp(-linear_model_cte.[Score_3]))) AS [Proba_1], (1.0 / (1.0 + exp(-linear_model_cte.[Score_2]))) / (1.0 / (1.0 + exp(-linear_model_cte.[Score_0])) + 1.0 / (1.0 + exp(-linear_model_cte.[Score_1])) + 1.0 / (1.0 + exp(-linear_model_cte.[Score_2])) + 1.0 / (1.0 + exp(-linear_model_cte.[Score_3]))) AS [Proba_2], (1.0 / (1.0 + exp(-linear_model_cte.[Score_3]))) / (1.0 / (1.0 + exp(-linear_model_cte.[Score_0])) + 1.0 / (1.0 + exp(-linear_model_cte.[Score_1])) + 1.0 / (1.0 + exp(-linear_model_cte.[Score_2])) + 1.0 / (1.0 + exp(-linear_model_cte.[Score_3]))) AS [Proba_3], CAST(NULL AS FLOAT(53)) AS [LogProba_0], CAST(NULL AS FLOAT(53)) AS [LogProba_1], CAST(NULL AS FLOAT(53)) AS [LogProba_2], CAST(NULL AS FLOAT(53)) AS [LogProba_3], CAST(NULL AS FLOAT(53)) AS [Decision] 
FROM linear_model_cte), 
score_class_union AS 
(SELECT scu.[KEY] AS [KEY], scu.class AS class, scu.[LogProba] AS [LogProba], scu.[Proba] AS [Proba], scu.[Score] AS [Score] 
FROM (SELECT orig_cte.[KEY] AS [KEY], 0 AS class, orig_cte.[LogProba_0] AS [LogProba], orig_cte.[Proba_0] AS [Proba], orig_cte.[Score_0] AS [Score] 
FROM orig_cte UNION ALL SELECT orig_cte.[KEY] AS [KEY], 1 AS class, orig_cte.[LogProba_1] AS [LogProba], orig_cte.[Proba_1] AS [Proba], orig_cte.[Score_1] AS [Score] 
FROM orig_cte UNION ALL SELECT orig_cte.[KEY] AS [KEY], 2 AS class, orig_cte.[LogProba_2] AS [LogProba], orig_cte.[Proba_2] AS [Proba], orig_cte.[Score_2] AS [Score] 
FROM orig_cte UNION ALL SELECT orig_cte.[KEY] AS [KEY], 3 AS class, orig_cte.[LogProba_3] AS [LogProba], orig_cte.[Proba_3] AS [Proba], orig_cte.[Score_3] AS [Score] 
FROM orig_cte) AS scu), 
score_max AS 
(SELECT orig_cte.[KEY] AS [KEY], orig_cte.[Score_0] AS [Score_0], orig_cte.[Score_1] AS [Score_1], orig_cte.[Score_2] AS [Score_2], orig_cte.[Score_3] AS [Score_3], orig_cte.[Proba_0] AS [Proba_0], orig_cte.[Proba_1] AS [Proba_1], orig_cte.[Proba_2] AS [Proba_2], orig_cte.[Proba_3] AS [Proba_3], orig_cte.[LogProba_0] AS [LogProba_0], orig_cte.[LogProba_1] AS [LogProba_1], orig_cte.[LogProba_2] AS [LogProba_2], orig_cte.[LogProba_3] AS [LogProba_3], orig_cte.[Decision] AS [Decision], (SELECT max(score_class_union.[LogProba]) AS max_1 
FROM score_class_union 
WHERE orig_cte.[KEY] = score_class_union.[KEY]) AS [max_LogProba], (SELECT max(score_class_union.[Proba]) AS max_2 
FROM score_class_union 
WHERE orig_cte.[KEY] = score_class_union.[KEY]) AS [max_Proba], (SELECT max(score_class_union.[Score]) AS max_3 
FROM score_class_union 
WHERE orig_cte.[KEY] = score_class_union.[KEY]) AS [max_Score] 
FROM orig_cte), 
arg_max_cte AS 
(SELECT score_max.[KEY] AS [KEY], score_max.[Score_0] AS [Score_0], score_max.[Score_1] AS [Score_1], score_max.[Score_2] AS [Score_2], score_max.[Score_3] AS [Score_3], score_max.[Proba_0] AS [Proba_0], score_max.[Proba_1] AS [Proba_1], score_max.[Proba_2] AS [Proba_2], score_max.[Proba_3] AS [Proba_3], score_max.[LogProba_0] AS [LogProba_0], score_max.[LogProba_1] AS [LogProba_1], score_max.[LogProba_2] AS [LogProba_2], score_max.[LogProba_3] AS [LogProba_3], score_max.[Decision] AS [Decision], score_max.[max_LogProba] AS [max_LogProba], score_max.[max_Proba] AS [max_Proba], score_max.[max_Score] AS [max_Score], (SELECT min(score_class_union.class) AS min_1 
FROM score_class_union 
WHERE score_max.[max_LogProba] = score_class_union.[LogProba] AND score_max.[KEY] = score_class_union.[KEY]) AS [arg_max_LogProba], (SELECT min(score_class_union.class) AS min_2 
FROM score_class_union 
WHERE score_max.[max_Proba] = score_class_union.[Proba] AND score_max.[KEY] = score_class_union.[KEY]) AS [arg_max_Proba], (SELECT min(score_class_union.class) AS min_3 
FROM score_class_union 
WHERE score_max.[max_Score] = score_class_union.[Score] AND score_max.[KEY] = score_class_union.[KEY]) AS [arg_max_Score] 
FROM score_max)
 SELECT arg_max_cte.[KEY] AS [KEY], arg_max_cte.[Score_0] AS [Score_0], arg_max_cte.[Score_1] AS [Score_1], arg_max_cte.[Score_2] AS [Score_2], arg_max_cte.[Score_3] AS [Score_3], arg_max_cte.[Proba_0] AS [Proba_0], arg_max_cte.[Proba_1] AS [Proba_1], arg_max_cte.[Proba_2] AS [Proba_2], arg_max_cte.[Proba_3] AS [Proba_3], CASE WHEN (arg_max_cte.[Proba_0] IS NULL OR arg_max_cte.[Proba_0] > 0.0) THEN log(arg_max_cte.[Proba_0]) ELSE -1.79769313486231e+308 END AS [LogProba_0], CASE WHEN (arg_max_cte.[Proba_1] IS NULL OR arg_max_cte.[Proba_1] > 0.0) THEN log(arg_max_cte.[Proba_1]) ELSE -1.79769313486231e+308 END AS [LogProba_1], CASE WHEN (arg_max_cte.[Proba_2] IS NULL OR arg_max_cte.[Proba_2] > 0.0) THEN log(arg_max_cte.[Proba_2]) ELSE -1.79769313486231e+308 END AS [LogProba_2], CASE WHEN (arg_max_cte.[Proba_3] IS NULL OR arg_max_cte.[Proba_3] > 0.0) THEN log(arg_max_cte.[Proba_3]) ELSE -1.79769313486231e+308 END AS [LogProba_3], arg_max_cte.[arg_max_Score] AS [Decision] 
FROM arg_max_cte