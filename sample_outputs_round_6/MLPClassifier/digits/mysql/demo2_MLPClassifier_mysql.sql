-- This SQL code was generated by scikit2sql (development version).
-- Copyright 2017

WITH `IL` AS 
(SELECT `ADS`.`KEY` AS `KEY`, `ADS`.`Feature_0` AS `Feature_0`, `ADS`.`Feature_1` AS `Feature_1`, `ADS`.`Feature_2` AS `Feature_2`, `ADS`.`Feature_3` AS `Feature_3`, `ADS`.`Feature_4` AS `Feature_4`, `ADS`.`Feature_5` AS `Feature_5`, `ADS`.`Feature_6` AS `Feature_6`, `ADS`.`Feature_7` AS `Feature_7`, `ADS`.`Feature_8` AS `Feature_8`, `ADS`.`Feature_9` AS `Feature_9`, `ADS`.`Feature_10` AS `Feature_10`, `ADS`.`Feature_11` AS `Feature_11`, `ADS`.`Feature_12` AS `Feature_12`, `ADS`.`Feature_13` AS `Feature_13`, `ADS`.`Feature_14` AS `Feature_14`, `ADS`.`Feature_15` AS `Feature_15`, `ADS`.`Feature_16` AS `Feature_16`, `ADS`.`Feature_17` AS `Feature_17`, `ADS`.`Feature_18` AS `Feature_18`, `ADS`.`Feature_19` AS `Feature_19`, `ADS`.`Feature_20` AS `Feature_20`, `ADS`.`Feature_21` AS `Feature_21`, `ADS`.`Feature_22` AS `Feature_22`, `ADS`.`Feature_23` AS `Feature_23`, `ADS`.`Feature_24` AS `Feature_24`, `ADS`.`Feature_25` AS `Feature_25`, `ADS`.`Feature_26` AS `Feature_26`, `ADS`.`Feature_27` AS `Feature_27`, `ADS`.`Feature_28` AS `Feature_28`, `ADS`.`Feature_29` AS `Feature_29`, `ADS`.`Feature_30` AS `Feature_30`, `ADS`.`Feature_31` AS `Feature_31`, `ADS`.`Feature_32` AS `Feature_32`, `ADS`.`Feature_33` AS `Feature_33`, `ADS`.`Feature_34` AS `Feature_34`, `ADS`.`Feature_35` AS `Feature_35`, `ADS`.`Feature_36` AS `Feature_36`, `ADS`.`Feature_37` AS `Feature_37`, `ADS`.`Feature_38` AS `Feature_38`, `ADS`.`Feature_39` AS `Feature_39`, `ADS`.`Feature_40` AS `Feature_40`, `ADS`.`Feature_41` AS `Feature_41`, `ADS`.`Feature_42` AS `Feature_42`, `ADS`.`Feature_43` AS `Feature_43`, `ADS`.`Feature_44` AS `Feature_44`, `ADS`.`Feature_45` AS `Feature_45`, `ADS`.`Feature_46` AS `Feature_46`, `ADS`.`Feature_47` AS `Feature_47`, `ADS`.`Feature_48` AS `Feature_48`, `ADS`.`Feature_49` AS `Feature_49`, `ADS`.`Feature_50` AS `Feature_50`, `ADS`.`Feature_51` AS `Feature_51`, `ADS`.`Feature_52` AS `Feature_52`, `ADS`.`Feature_53` AS `Feature_53`, `ADS`.`Feature_54` AS `Feature_54`, `ADS`.`Feature_55` AS `Feature_55`, `ADS`.`Feature_56` AS `Feature_56`, `ADS`.`Feature_57` AS `Feature_57`, `ADS`.`Feature_58` AS `Feature_58`, `ADS`.`Feature_59` AS `Feature_59`, `ADS`.`Feature_60` AS `Feature_60`, `ADS`.`Feature_61` AS `Feature_61`, `ADS`.`Feature_62` AS `Feature_62`, `ADS`.`Feature_63` AS `Feature_63` 
FROM digits AS `ADS`), 
`HL_BA_1` AS 
(SELECT `IL`.`KEY` AS `KEY`, -0.0434998054299 * `IL`.`Feature_0` + 0.265950633876 * `IL`.`Feature_1` + 0.3943456831 * `IL`.`Feature_2` + 0.271328456001 * `IL`.`Feature_3` + -0.314468546861 * `IL`.`Feature_4` + -1.2163311525 * `IL`.`Feature_5` + -2.19037768501 * `IL`.`Feature_6` + -0.16577797742 * `IL`.`Feature_7` + -0.0480473807912 * `IL`.`Feature_8` + 1.37463084545 * `IL`.`Feature_9` + 0.84503869765 * `IL`.`Feature_10` + -0.328244373118 * `IL`.`Feature_11` + 1.53962223484 * `IL`.`Feature_12` + 2.62863110253 * `IL`.`Feature_13` + 0.317585424649 * `IL`.`Feature_14` + -0.0191403154018 * `IL`.`Feature_15` + -0.076727320356 * `IL`.`Feature_16` + 0.399676106251 * `IL`.`Feature_17` + -0.764405111007 * `IL`.`Feature_18` + -1.29033181541 * `IL`.`Feature_19` + 2.45893110439 * `IL`.`Feature_20` + 2.76389116631 * `IL`.`Feature_21` + 1.5200466833 * `IL`.`Feature_22` + -0.253061531499 * `IL`.`Feature_23` + 0.17417081083 * `IL`.`Feature_24` + -0.572827339869 * `IL`.`Feature_25` + -1.53771527129 * `IL`.`Feature_26` + -2.42154754685 * `IL`.`Feature_27` + -0.653672544911 * `IL`.`Feature_28` + -0.836904463872 * `IL`.`Feature_29` + -0.85826461291 * `IL`.`Feature_30` + 0.192469590005 * `IL`.`Feature_31` + -0.291015232005 * `IL`.`Feature_32` + -0.454285027566 * `IL`.`Feature_33` + -1.68437955022 * `IL`.`Feature_34` + -1.05114545514 * `IL`.`Feature_35` + -0.980387910254 * `IL`.`Feature_36` + -2.28736517612 * `IL`.`Feature_37` + -2.25717323739 * `IL`.`Feature_38` + 0.113528746827 * `IL`.`Feature_39` + 0.0261555780784 * `IL`.`Feature_40` + 0.12167428546 * `IL`.`Feature_41` + 0.359337493899 * `IL`.`Feature_42` + -0.220329275038 * `IL`.`Feature_43` + -3.81217565032 * `IL`.`Feature_44` + -1.78995557206 * `IL`.`Feature_45` + -1.32404408665 * `IL`.`Feature_46` + 0.179621744117 * `IL`.`Feature_47` + 0.0440977730897 * `IL`.`Feature_48` + 0.519768973709 * `IL`.`Feature_49` + 0.408175373605 * `IL`.`Feature_50` + 0.861891611867 * `IL`.`Feature_51` + 4.68378470446 * `IL`.`Feature_52` + 2.33840673759 * `IL`.`Feature_53` + 1.0497449679 * `IL`.`Feature_54` + -0.0737682565771 * `IL`.`Feature_55` + -0.126208458802 * `IL`.`Feature_56` + 0.398611062622 * `IL`.`Feature_57` + 0.482570957336 * `IL`.`Feature_58` + 1.13276643836 * `IL`.`Feature_59` + 2.60348542157 * `IL`.`Feature_60` + 1.44969829448 * `IL`.`Feature_61` + 1.77634970435 * `IL`.`Feature_62` + -0.708981789195 * `IL`.`Feature_63` + -0.229658659871 AS `NEUR_1_1`, 0.0579591173897 * `IL`.`Feature_0` + 0.00103389573994 * `IL`.`Feature_1` + -0.217712785411 * `IL`.`Feature_2` + 0.073794397825 * `IL`.`Feature_3` + 0.00574239376084 * `IL`.`Feature_4` + 0.184574836097 * `IL`.`Feature_5` + -0.143760187699 * `IL`.`Feature_6` + -0.286084668328 * `IL`.`Feature_7` + 0.252232211242 * `IL`.`Feature_8` + -0.0517858789891 * `IL`.`Feature_9` + -0.23898739623 * `IL`.`Feature_10` + -0.151328520529 * `IL`.`Feature_11` + -0.287307207333 * `IL`.`Feature_12` + 0.121391321937 * `IL`.`Feature_13` + 0.0212550220071 * `IL`.`Feature_14` + -0.14060291974 * `IL`.`Feature_15` + 0.0866272152333 * `IL`.`Feature_16` + -0.204800054349 * `IL`.`Feature_17` + -0.0280865720972 * `IL`.`Feature_18` + 0.101015858532 * `IL`.`Feature_19` + -0.347906231603 * `IL`.`Feature_20` + -0.0280920519044 * `IL`.`Feature_21` + -0.221402222155 * `IL`.`Feature_22` + -0.00136680680417 * `IL`.`Feature_23` + 0.136582115957 * `IL`.`Feature_24` + -0.0644978932266 * `IL`.`Feature_25` + -0.0165802020924 * `IL`.`Feature_26` + 0.0878217222256 * `IL`.`Feature_27` + -0.0997410951026 * `IL`.`Feature_28` + -0.281873868814 * `IL`.`Feature_29` + -0.0325719120124 * `IL`.`Feature_30` + -0.211375417406 * `IL`.`Feature_31` + -0.240088064919 * `IL`.`Feature_32` + 0.0718439506309 * `IL`.`Feature_33` + -0.271162935517 * `IL`.`Feature_34` + -0.000585062479672 * `IL`.`Feature_35` + 0.162464578403 * `IL`.`Feature_36` + -0.31603665449 * `IL`.`Feature_37` + 0.233521029134 * `IL`.`Feature_38` + 0.147850632322 * `IL`.`Feature_39` + 0.258307690351 * `IL`.`Feature_40` + 0.0229507420811 * `IL`.`Feature_41` + 0.169867131568 * `IL`.`Feature_42` + -0.0519075503474 * `IL`.`Feature_43` + 0.17984022398 * `IL`.`Feature_44` + -0.21937943485 * `IL`.`Feature_45` + 0.0396084032888 * `IL`.`Feature_46` + 0.207685398357 * `IL`.`Feature_47` + -0.0457974878349 * `IL`.`Feature_48` + -0.107341787893 * `IL`.`Feature_49` + 0.0403957777173 * `IL`.`Feature_50` + -0.182578979586 * `IL`.`Feature_51` + -0.284763801172 * `IL`.`Feature_52` + -0.115116292372 * `IL`.`Feature_53` + 0.259166956326 * `IL`.`Feature_54` + -0.0559653505297 * `IL`.`Feature_55` + 0.0818004042776 * `IL`.`Feature_56` + 0.0672546372503 * `IL`.`Feature_57` + 0.115515897772 * `IL`.`Feature_58` + -0.224129815716 * `IL`.`Feature_59` + -0.220909133577 * `IL`.`Feature_60` + 0.186010726775 * `IL`.`Feature_61` + -0.166391445513 * `IL`.`Feature_62` + 0.0826587060082 * `IL`.`Feature_63` + 0.28048037839 AS `NEUR_1_2`, 0.283576182786 * `IL`.`Feature_0` + -0.200262257758 * `IL`.`Feature_1` + 0.0629121360623 * `IL`.`Feature_2` + -0.13552420927 * `IL`.`Feature_3` + -0.340528065848 * `IL`.`Feature_4` + -0.179592008039 * `IL`.`Feature_5` + 0.171235161462 * `IL`.`Feature_6` + -0.179893785435 * `IL`.`Feature_7` + -0.223208821002 * `IL`.`Feature_8` + 0.212822884268 * `IL`.`Feature_9` + -0.165762722698 * `IL`.`Feature_10` + -0.171874125288 * `IL`.`Feature_11` + 0.0472137261217 * `IL`.`Feature_12` + -0.268183735812 * `IL`.`Feature_13` + -0.27864095885 * `IL`.`Feature_14` + -0.227971354582 * `IL`.`Feature_15` + 0.0599429409023 * `IL`.`Feature_16` + -0.0824181023964 * `IL`.`Feature_17` + 0.0478301216643 * `IL`.`Feature_18` + -0.141445388692 * `IL`.`Feature_19` + -0.209815688239 * `IL`.`Feature_20` + 0.0479937610948 * `IL`.`Feature_21` + -0.306906951958 * `IL`.`Feature_22` + 0.164743410587 * `IL`.`Feature_23` + 0.291069090803 * `IL`.`Feature_24` + 0.0214475052903 * `IL`.`Feature_25` + -0.029191269358 * `IL`.`Feature_26` + 0.130765442837 * `IL`.`Feature_27` + -0.0566688300919 * `IL`.`Feature_28` + -0.00758941902779 * `IL`.`Feature_29` + -0.282460598432 * `IL`.`Feature_30` + 0.109941093504 * `IL`.`Feature_31` + -0.218333484626 * `IL`.`Feature_32` + -0.158699639936 * `IL`.`Feature_33` + -0.151712607845 * `IL`.`Feature_34` + -0.344252519901 * `IL`.`Feature_35` + 0.0662242952778 * `IL`.`Feature_36` + -0.0479765387046 * `IL`.`Feature_37` + -0.0628265176331 * `IL`.`Feature_38` + -0.261471067943 * `IL`.`Feature_39` + 0.040153872403 * `IL`.`Feature_40` + -0.0910934292129 * `IL`.`Feature_41` + -0.18845620148 * `IL`.`Feature_42` + -0.163746849031 * `IL`.`Feature_43` + -0.148022529973 * `IL`.`Feature_44` + -0.373405947696 * `IL`.`Feature_45` + 0.197638699638 * `IL`.`Feature_46` + 0.200208650554 * `IL`.`Feature_47` + -0.0515932726795 * `IL`.`Feature_48` + -0.142410941934 * `IL`.`Feature_49` + 0.0558692397866 * `IL`.`Feature_50` + -0.105351759704 * `IL`.`Feature_51` + 0.148216192117 * `IL`.`Feature_52` + 0.0772816883118 * `IL`.`Feature_53` + -0.0895543103798 * `IL`.`Feature_54` + -0.179746868073 * `IL`.`Feature_55` + 0.050044743956 * `IL`.`Feature_56` + -0.0504946088733 * `IL`.`Feature_57` + -0.213645617059 * `IL`.`Feature_58` + -0.186310000098 * `IL`.`Feature_59` + -0.310885866544 * `IL`.`Feature_60` + -0.320020311676 * `IL`.`Feature_61` + -0.164722890084 * `IL`.`Feature_62` + 0.182447253049 * `IL`.`Feature_63` + -0.309648868923 AS `NEUR_1_3` 
FROM `IL`), 
`HL_1_relu` AS 
(SELECT `HL_BA_1`.`KEY` AS `KEY`, CASE WHEN (`HL_BA_1`.`NEUR_1_1` >= 0.0) THEN `HL_BA_1`.`NEUR_1_1` ELSE 0.0 END AS `NEUR_1_1`, CASE WHEN (`HL_BA_1`.`NEUR_1_2` >= 0.0) THEN `HL_BA_1`.`NEUR_1_2` ELSE 0.0 END AS `NEUR_1_2`, CASE WHEN (`HL_BA_1`.`NEUR_1_3` >= 0.0) THEN `HL_BA_1`.`NEUR_1_3` ELSE 0.0 END AS `NEUR_1_3` 
FROM `HL_BA_1`), 
`HL_BA_2` AS 
(SELECT `HL_1_relu`.`KEY` AS `KEY`, -0.517341645304 * `HL_1_relu`.`NEUR_1_1` + -0.863969707959 * `HL_1_relu`.`NEUR_1_2` + -0.276657904484 * `HL_1_relu`.`NEUR_1_3` + 1.99500720341 AS `NEUR_2_1`, -0.0292956592808 * `HL_1_relu`.`NEUR_1_1` + -0.40582703718 * `HL_1_relu`.`NEUR_1_2` + 0.166446109688 * `HL_1_relu`.`NEUR_1_3` + -0.815792375081 AS `NEUR_2_2`, -0.0569741267019 * `HL_1_relu`.`NEUR_1_1` + 0.831622203035 * `HL_1_relu`.`NEUR_1_2` + 0.749718538784 * `HL_1_relu`.`NEUR_1_3` + -0.295666295511 AS `NEUR_2_3`, -1.11132638525 * `HL_1_relu`.`NEUR_1_1` + 0.382253612154 * `HL_1_relu`.`NEUR_1_2` + -0.29077479672 * `HL_1_relu`.`NEUR_1_3` + -1.73808570683 AS `NEUR_2_4`, 0.0767719807757 * `HL_1_relu`.`NEUR_1_1` + -0.264006789609 * `HL_1_relu`.`NEUR_1_2` + 0.112350403995 * `HL_1_relu`.`NEUR_1_3` + -2.36867311924 AS `NEUR_2_5` 
FROM `HL_1_relu`), 
`HL_2_relu` AS 
(SELECT `HL_BA_2`.`KEY` AS `KEY`, CASE WHEN (`HL_BA_2`.`NEUR_2_1` >= 0.0) THEN `HL_BA_2`.`NEUR_2_1` ELSE 0.0 END AS `NEUR_2_1`, CASE WHEN (`HL_BA_2`.`NEUR_2_2` >= 0.0) THEN `HL_BA_2`.`NEUR_2_2` ELSE 0.0 END AS `NEUR_2_2`, CASE WHEN (`HL_BA_2`.`NEUR_2_3` >= 0.0) THEN `HL_BA_2`.`NEUR_2_3` ELSE 0.0 END AS `NEUR_2_3`, CASE WHEN (`HL_BA_2`.`NEUR_2_4` >= 0.0) THEN `HL_BA_2`.`NEUR_2_4` ELSE 0.0 END AS `NEUR_2_4`, CASE WHEN (`HL_BA_2`.`NEUR_2_5` >= 0.0) THEN `HL_BA_2`.`NEUR_2_5` ELSE 0.0 END AS `NEUR_2_5` 
FROM `HL_BA_2`), 
`OL_BA` AS 
(SELECT `HL_2_relu`.`KEY` AS `KEY`, -1.73029084372 * `HL_2_relu`.`NEUR_2_1` + 0.326347433182 * `HL_2_relu`.`NEUR_2_2` + -0.307800050293 * `HL_2_relu`.`NEUR_2_3` + -0.218030707652 * `HL_2_relu`.`NEUR_2_4` + 0.838403915279 * `HL_2_relu`.`NEUR_2_5` + -0.732543864276 AS `NEUR_3_1`, -0.929850576138 * `HL_2_relu`.`NEUR_2_1` + 0.369304352332 * `HL_2_relu`.`NEUR_2_2` + -0.546232463175 * `HL_2_relu`.`NEUR_2_3` + -0.711346895262 * `HL_2_relu`.`NEUR_2_4` + -0.115988631569 * `HL_2_relu`.`NEUR_2_5` + 2.62170607949 AS `NEUR_3_2`, -2.01833173276 * `HL_2_relu`.`NEUR_2_1` + 0.181776585895 * `HL_2_relu`.`NEUR_2_2` + -0.28722426299 * `HL_2_relu`.`NEUR_2_3` + 0.607352823514 * `HL_2_relu`.`NEUR_2_4` + 1.65978402652 * `HL_2_relu`.`NEUR_2_5` + -7.93358931908 AS `NEUR_3_3`, -1.72312427004 * `HL_2_relu`.`NEUR_2_1` + 0.352050410859 * `HL_2_relu`.`NEUR_2_2` + 0.339534883209 * `HL_2_relu`.`NEUR_2_3` + 1.15623905628 * `HL_2_relu`.`NEUR_2_4` + 1.03721098301 * `HL_2_relu`.`NEUR_2_5` + -2.01384798088 AS `NEUR_3_4`, 2.16092260681 * `HL_2_relu`.`NEUR_2_1` + 0.0698203317331 * `HL_2_relu`.`NEUR_2_2` + -0.0486962807043 * `HL_2_relu`.`NEUR_2_3` + -0.605572843002 * `HL_2_relu`.`NEUR_2_4` + -2.08461733342 * `HL_2_relu`.`NEUR_2_5` + -0.323659597488 AS `NEUR_3_5`, 0.983300561722 * `HL_2_relu`.`NEUR_2_1` + 0.599824808981 * `HL_2_relu`.`NEUR_2_2` + -0.492695294228 * `HL_2_relu`.`NEUR_2_3` + 0.281709608375 * `HL_2_relu`.`NEUR_2_4` + -0.872522855035 * `HL_2_relu`.`NEUR_2_5` + 1.67477138133 AS `NEUR_3_6`, 1.3661440309 * `HL_2_relu`.`NEUR_2_1` + -0.603400726834 * `HL_2_relu`.`NEUR_2_2` + 0.200659174001 * `HL_2_relu`.`NEUR_2_3` + -0.511208129509 * `HL_2_relu`.`NEUR_2_4` + -1.60085342484 * `HL_2_relu`.`NEUR_2_5` + 1.05467146344 AS `NEUR_3_7`, 1.23786881926 * `HL_2_relu`.`NEUR_2_1` + 0.248246642077 * `HL_2_relu`.`NEUR_2_2` + -0.356412772796 * `HL_2_relu`.`NEUR_2_3` + -0.0127756517342 * `HL_2_relu`.`NEUR_2_4` + -0.90203436312 * `HL_2_relu`.`NEUR_2_5` + 1.28300351507 AS `NEUR_3_8`, -0.975010018477 * `HL_2_relu`.`NEUR_2_1` + 0.544169062603 * `HL_2_relu`.`NEUR_2_2` + 0.487517774279 * `HL_2_relu`.`NEUR_2_3` + 0.136359923431 * `HL_2_relu`.`NEUR_2_4` + 0.172427999345 * `HL_2_relu`.`NEUR_2_5` + 2.0774443209 AS `NEUR_3_9`, 1.30627691019 * `HL_2_relu`.`NEUR_2_1` + -0.426809634599 * `HL_2_relu`.`NEUR_2_2` + -0.383747652245 * `HL_2_relu`.`NEUR_2_3` + -0.155361787626 * `HL_2_relu`.`NEUR_2_4` + 0.746565715065 * `HL_2_relu`.`NEUR_2_5` + -0.315152680606 AS `NEUR_3_10` 
FROM `HL_2_relu`), 
`OL_softmax` AS 
(SELECT `OL_BA`.`KEY` AS `KEY`, `OL_BA`.`NEUR_3_1` AS `NEUR_3_1`, `OL_BA`.`NEUR_3_2` AS `NEUR_3_2`, `OL_BA`.`NEUR_3_3` AS `NEUR_3_3`, `OL_BA`.`NEUR_3_4` AS `NEUR_3_4`, `OL_BA`.`NEUR_3_5` AS `NEUR_3_5`, `OL_BA`.`NEUR_3_6` AS `NEUR_3_6`, `OL_BA`.`NEUR_3_7` AS `NEUR_3_7`, `OL_BA`.`NEUR_3_8` AS `NEUR_3_8`, `OL_BA`.`NEUR_3_9` AS `NEUR_3_9`, `OL_BA`.`NEUR_3_10` AS `NEUR_3_10` 
FROM `OL_BA`), 
orig_cte AS 
(SELECT `OL_softmax`.`KEY` AS `KEY`, `OL_softmax`.`NEUR_3_1` AS `Score_0`, `OL_softmax`.`NEUR_3_2` AS `Score_1`, `OL_softmax`.`NEUR_3_3` AS `Score_2`, `OL_softmax`.`NEUR_3_4` AS `Score_3`, `OL_softmax`.`NEUR_3_5` AS `Score_4`, `OL_softmax`.`NEUR_3_6` AS `Score_5`, `OL_softmax`.`NEUR_3_7` AS `Score_6`, `OL_softmax`.`NEUR_3_8` AS `Score_7`, `OL_softmax`.`NEUR_3_9` AS `Score_8`, `OL_softmax`.`NEUR_3_10` AS `Score_9`, NULL AS `Proba_0`, NULL AS `Proba_1`, NULL AS `Proba_2`, NULL AS `Proba_3`, NULL AS `Proba_4`, NULL AS `Proba_5`, NULL AS `Proba_6`, NULL AS `Proba_7`, NULL AS `Proba_8`, NULL AS `Proba_9`, NULL AS `LogProba_0`, NULL AS `LogProba_1`, NULL AS `LogProba_2`, NULL AS `LogProba_3`, NULL AS `LogProba_4`, NULL AS `LogProba_5`, NULL AS `LogProba_6`, NULL AS `LogProba_7`, NULL AS `LogProba_8`, NULL AS `LogProba_9`, NULL AS `Decision` 
FROM `OL_softmax`), 
score_class_union AS 
(SELECT scu.`KEY` AS `KEY`, scu.class AS class, scu.`LogProba` AS `LogProba`, scu.`Proba` AS `Proba`, scu.`Score` AS `Score` 
FROM (SELECT orig_cte.`KEY` AS `KEY`, 0 AS class, orig_cte.`LogProba_0` AS `LogProba`, orig_cte.`Proba_0` AS `Proba`, orig_cte.`Score_0` AS `Score` 
FROM orig_cte UNION ALL SELECT orig_cte.`KEY` AS `KEY`, 1 AS class, orig_cte.`LogProba_1` AS `LogProba`, orig_cte.`Proba_1` AS `Proba`, orig_cte.`Score_1` AS `Score` 
FROM orig_cte UNION ALL SELECT orig_cte.`KEY` AS `KEY`, 2 AS class, orig_cte.`LogProba_2` AS `LogProba`, orig_cte.`Proba_2` AS `Proba`, orig_cte.`Score_2` AS `Score` 
FROM orig_cte UNION ALL SELECT orig_cte.`KEY` AS `KEY`, 3 AS class, orig_cte.`LogProba_3` AS `LogProba`, orig_cte.`Proba_3` AS `Proba`, orig_cte.`Score_3` AS `Score` 
FROM orig_cte UNION ALL SELECT orig_cte.`KEY` AS `KEY`, 4 AS class, orig_cte.`LogProba_4` AS `LogProba`, orig_cte.`Proba_4` AS `Proba`, orig_cte.`Score_4` AS `Score` 
FROM orig_cte UNION ALL SELECT orig_cte.`KEY` AS `KEY`, 5 AS class, orig_cte.`LogProba_5` AS `LogProba`, orig_cte.`Proba_5` AS `Proba`, orig_cte.`Score_5` AS `Score` 
FROM orig_cte UNION ALL SELECT orig_cte.`KEY` AS `KEY`, 6 AS class, orig_cte.`LogProba_6` AS `LogProba`, orig_cte.`Proba_6` AS `Proba`, orig_cte.`Score_6` AS `Score` 
FROM orig_cte UNION ALL SELECT orig_cte.`KEY` AS `KEY`, 7 AS class, orig_cte.`LogProba_7` AS `LogProba`, orig_cte.`Proba_7` AS `Proba`, orig_cte.`Score_7` AS `Score` 
FROM orig_cte UNION ALL SELECT orig_cte.`KEY` AS `KEY`, 8 AS class, orig_cte.`LogProba_8` AS `LogProba`, orig_cte.`Proba_8` AS `Proba`, orig_cte.`Score_8` AS `Score` 
FROM orig_cte UNION ALL SELECT orig_cte.`KEY` AS `KEY`, 9 AS class, orig_cte.`LogProba_9` AS `LogProba`, orig_cte.`Proba_9` AS `Proba`, orig_cte.`Score_9` AS `Score` 
FROM orig_cte) AS scu), 
score_max AS 
(SELECT orig_cte.`KEY` AS `KEY`, orig_cte.`Score_0` AS `Score_0`, orig_cte.`Score_1` AS `Score_1`, orig_cte.`Score_2` AS `Score_2`, orig_cte.`Score_3` AS `Score_3`, orig_cte.`Score_4` AS `Score_4`, orig_cte.`Score_5` AS `Score_5`, orig_cte.`Score_6` AS `Score_6`, orig_cte.`Score_7` AS `Score_7`, orig_cte.`Score_8` AS `Score_8`, orig_cte.`Score_9` AS `Score_9`, orig_cte.`Proba_0` AS `Proba_0`, orig_cte.`Proba_1` AS `Proba_1`, orig_cte.`Proba_2` AS `Proba_2`, orig_cte.`Proba_3` AS `Proba_3`, orig_cte.`Proba_4` AS `Proba_4`, orig_cte.`Proba_5` AS `Proba_5`, orig_cte.`Proba_6` AS `Proba_6`, orig_cte.`Proba_7` AS `Proba_7`, orig_cte.`Proba_8` AS `Proba_8`, orig_cte.`Proba_9` AS `Proba_9`, orig_cte.`LogProba_0` AS `LogProba_0`, orig_cte.`LogProba_1` AS `LogProba_1`, orig_cte.`LogProba_2` AS `LogProba_2`, orig_cte.`LogProba_3` AS `LogProba_3`, orig_cte.`LogProba_4` AS `LogProba_4`, orig_cte.`LogProba_5` AS `LogProba_5`, orig_cte.`LogProba_6` AS `LogProba_6`, orig_cte.`LogProba_7` AS `LogProba_7`, orig_cte.`LogProba_8` AS `LogProba_8`, orig_cte.`LogProba_9` AS `LogProba_9`, orig_cte.`Decision` AS `Decision`, (SELECT max(score_class_union.`LogProba`) AS max_1 
FROM score_class_union 
WHERE orig_cte.`KEY` = score_class_union.`KEY`) AS `max_LogProba`, (SELECT max(score_class_union.`Proba`) AS max_2 
FROM score_class_union 
WHERE orig_cte.`KEY` = score_class_union.`KEY`) AS `max_Proba`, (SELECT max(score_class_union.`Score`) AS max_3 
FROM score_class_union 
WHERE orig_cte.`KEY` = score_class_union.`KEY`) AS `max_Score` 
FROM orig_cte), 
score_soft_max_comp AS 
(SELECT score_max.`KEY` AS `KEY`, score_max.`Score_0` AS `Score_0`, score_max.`Score_1` AS `Score_1`, score_max.`Score_2` AS `Score_2`, score_max.`Score_3` AS `Score_3`, score_max.`Score_4` AS `Score_4`, score_max.`Score_5` AS `Score_5`, score_max.`Score_6` AS `Score_6`, score_max.`Score_7` AS `Score_7`, score_max.`Score_8` AS `Score_8`, score_max.`Score_9` AS `Score_9`, score_max.`Proba_0` AS `Proba_0`, score_max.`Proba_1` AS `Proba_1`, score_max.`Proba_2` AS `Proba_2`, score_max.`Proba_3` AS `Proba_3`, score_max.`Proba_4` AS `Proba_4`, score_max.`Proba_5` AS `Proba_5`, score_max.`Proba_6` AS `Proba_6`, score_max.`Proba_7` AS `Proba_7`, score_max.`Proba_8` AS `Proba_8`, score_max.`Proba_9` AS `Proba_9`, score_max.`LogProba_0` AS `LogProba_0`, score_max.`LogProba_1` AS `LogProba_1`, score_max.`LogProba_2` AS `LogProba_2`, score_max.`LogProba_3` AS `LogProba_3`, score_max.`LogProba_4` AS `LogProba_4`, score_max.`LogProba_5` AS `LogProba_5`, score_max.`LogProba_6` AS `LogProba_6`, score_max.`LogProba_7` AS `LogProba_7`, score_max.`LogProba_8` AS `LogProba_8`, score_max.`LogProba_9` AS `LogProba_9`, score_max.`Decision` AS `Decision`, score_max.`max_LogProba` AS `max_LogProba`, score_max.`max_Proba` AS `max_Proba`, score_max.`max_Score` AS `max_Score`, exp(score_max.`Score_0` - score_max.`max_Score`) AS `exp_delta_Score_0`, exp(score_max.`Score_1` - score_max.`max_Score`) AS `exp_delta_Score_1`, exp(score_max.`Score_2` - score_max.`max_Score`) AS `exp_delta_Score_2`, exp(score_max.`Score_3` - score_max.`max_Score`) AS `exp_delta_Score_3`, exp(score_max.`Score_4` - score_max.`max_Score`) AS `exp_delta_Score_4`, exp(score_max.`Score_5` - score_max.`max_Score`) AS `exp_delta_Score_5`, exp(score_max.`Score_6` - score_max.`max_Score`) AS `exp_delta_Score_6`, exp(score_max.`Score_7` - score_max.`max_Score`) AS `exp_delta_Score_7`, exp(score_max.`Score_8` - score_max.`max_Score`) AS `exp_delta_Score_8`, exp(score_max.`Score_9` - score_max.`max_Score`) AS `exp_delta_Score_9` 
FROM score_max), 
score_class_union_soft AS 
(SELECT soft_scu.`KEY` AS `KEY`, soft_scu.class AS class, soft_scu.`LogProba` AS `LogProba`, soft_scu.`Proba` AS `Proba`, soft_scu.`Score` AS `Score`, soft_scu.`exp_delta_Score` AS `exp_delta_Score` 
FROM (SELECT score_soft_max_comp.`KEY` AS `KEY`, 0 AS class, score_soft_max_comp.`LogProba_0` AS `LogProba`, score_soft_max_comp.`Proba_0` AS `Proba`, score_soft_max_comp.`Score_0` AS `Score`, score_soft_max_comp.`exp_delta_Score_0` AS `exp_delta_Score` 
FROM score_soft_max_comp UNION ALL SELECT score_soft_max_comp.`KEY` AS `KEY`, 1 AS class, score_soft_max_comp.`LogProba_1` AS `LogProba`, score_soft_max_comp.`Proba_1` AS `Proba`, score_soft_max_comp.`Score_1` AS `Score`, score_soft_max_comp.`exp_delta_Score_1` AS `exp_delta_Score` 
FROM score_soft_max_comp UNION ALL SELECT score_soft_max_comp.`KEY` AS `KEY`, 2 AS class, score_soft_max_comp.`LogProba_2` AS `LogProba`, score_soft_max_comp.`Proba_2` AS `Proba`, score_soft_max_comp.`Score_2` AS `Score`, score_soft_max_comp.`exp_delta_Score_2` AS `exp_delta_Score` 
FROM score_soft_max_comp UNION ALL SELECT score_soft_max_comp.`KEY` AS `KEY`, 3 AS class, score_soft_max_comp.`LogProba_3` AS `LogProba`, score_soft_max_comp.`Proba_3` AS `Proba`, score_soft_max_comp.`Score_3` AS `Score`, score_soft_max_comp.`exp_delta_Score_3` AS `exp_delta_Score` 
FROM score_soft_max_comp UNION ALL SELECT score_soft_max_comp.`KEY` AS `KEY`, 4 AS class, score_soft_max_comp.`LogProba_4` AS `LogProba`, score_soft_max_comp.`Proba_4` AS `Proba`, score_soft_max_comp.`Score_4` AS `Score`, score_soft_max_comp.`exp_delta_Score_4` AS `exp_delta_Score` 
FROM score_soft_max_comp UNION ALL SELECT score_soft_max_comp.`KEY` AS `KEY`, 5 AS class, score_soft_max_comp.`LogProba_5` AS `LogProba`, score_soft_max_comp.`Proba_5` AS `Proba`, score_soft_max_comp.`Score_5` AS `Score`, score_soft_max_comp.`exp_delta_Score_5` AS `exp_delta_Score` 
FROM score_soft_max_comp UNION ALL SELECT score_soft_max_comp.`KEY` AS `KEY`, 6 AS class, score_soft_max_comp.`LogProba_6` AS `LogProba`, score_soft_max_comp.`Proba_6` AS `Proba`, score_soft_max_comp.`Score_6` AS `Score`, score_soft_max_comp.`exp_delta_Score_6` AS `exp_delta_Score` 
FROM score_soft_max_comp UNION ALL SELECT score_soft_max_comp.`KEY` AS `KEY`, 7 AS class, score_soft_max_comp.`LogProba_7` AS `LogProba`, score_soft_max_comp.`Proba_7` AS `Proba`, score_soft_max_comp.`Score_7` AS `Score`, score_soft_max_comp.`exp_delta_Score_7` AS `exp_delta_Score` 
FROM score_soft_max_comp UNION ALL SELECT score_soft_max_comp.`KEY` AS `KEY`, 8 AS class, score_soft_max_comp.`LogProba_8` AS `LogProba`, score_soft_max_comp.`Proba_8` AS `Proba`, score_soft_max_comp.`Score_8` AS `Score`, score_soft_max_comp.`exp_delta_Score_8` AS `exp_delta_Score` 
FROM score_soft_max_comp UNION ALL SELECT score_soft_max_comp.`KEY` AS `KEY`, 9 AS class, score_soft_max_comp.`LogProba_9` AS `LogProba`, score_soft_max_comp.`Proba_9` AS `Proba`, score_soft_max_comp.`Score_9` AS `Score`, score_soft_max_comp.`exp_delta_Score_9` AS `exp_delta_Score` 
FROM score_soft_max_comp) AS soft_scu), 
score_soft_max AS 
(SELECT score_soft_max_comp.`KEY` AS `KEY`, score_soft_max_comp.`Score_0` AS `Score_0`, score_soft_max_comp.`Score_1` AS `Score_1`, score_soft_max_comp.`Score_2` AS `Score_2`, score_soft_max_comp.`Score_3` AS `Score_3`, score_soft_max_comp.`Score_4` AS `Score_4`, score_soft_max_comp.`Score_5` AS `Score_5`, score_soft_max_comp.`Score_6` AS `Score_6`, score_soft_max_comp.`Score_7` AS `Score_7`, score_soft_max_comp.`Score_8` AS `Score_8`, score_soft_max_comp.`Score_9` AS `Score_9`, score_soft_max_comp.`Proba_0` AS `Proba_0`, score_soft_max_comp.`Proba_1` AS `Proba_1`, score_soft_max_comp.`Proba_2` AS `Proba_2`, score_soft_max_comp.`Proba_3` AS `Proba_3`, score_soft_max_comp.`Proba_4` AS `Proba_4`, score_soft_max_comp.`Proba_5` AS `Proba_5`, score_soft_max_comp.`Proba_6` AS `Proba_6`, score_soft_max_comp.`Proba_7` AS `Proba_7`, score_soft_max_comp.`Proba_8` AS `Proba_8`, score_soft_max_comp.`Proba_9` AS `Proba_9`, score_soft_max_comp.`LogProba_0` AS `LogProba_0`, score_soft_max_comp.`LogProba_1` AS `LogProba_1`, score_soft_max_comp.`LogProba_2` AS `LogProba_2`, score_soft_max_comp.`LogProba_3` AS `LogProba_3`, score_soft_max_comp.`LogProba_4` AS `LogProba_4`, score_soft_max_comp.`LogProba_5` AS `LogProba_5`, score_soft_max_comp.`LogProba_6` AS `LogProba_6`, score_soft_max_comp.`LogProba_7` AS `LogProba_7`, score_soft_max_comp.`LogProba_8` AS `LogProba_8`, score_soft_max_comp.`LogProba_9` AS `LogProba_9`, score_soft_max_comp.`Decision` AS `Decision`, score_soft_max_comp.`max_LogProba` AS `max_LogProba`, score_soft_max_comp.`max_Proba` AS `max_Proba`, score_soft_max_comp.`max_Score` AS `max_Score`, score_soft_max_comp.`exp_delta_Score_0` AS `exp_delta_Score_0`, score_soft_max_comp.`exp_delta_Score_1` AS `exp_delta_Score_1`, score_soft_max_comp.`exp_delta_Score_2` AS `exp_delta_Score_2`, score_soft_max_comp.`exp_delta_Score_3` AS `exp_delta_Score_3`, score_soft_max_comp.`exp_delta_Score_4` AS `exp_delta_Score_4`, score_soft_max_comp.`exp_delta_Score_5` AS `exp_delta_Score_5`, score_soft_max_comp.`exp_delta_Score_6` AS `exp_delta_Score_6`, score_soft_max_comp.`exp_delta_Score_7` AS `exp_delta_Score_7`, score_soft_max_comp.`exp_delta_Score_8` AS `exp_delta_Score_8`, score_soft_max_comp.`exp_delta_Score_9` AS `exp_delta_Score_9`, (SELECT sum(score_class_union_soft.`exp_delta_Score`) AS sum_1 
FROM score_class_union_soft 
WHERE score_soft_max_comp.`KEY` = score_class_union_soft.`KEY`) AS `sum_ExpDeltaScore` 
FROM score_soft_max_comp), 
arg_max_cte AS 
(SELECT score_soft_max.`KEY` AS `KEY`, score_soft_max.`Score_0` AS `Score_0`, score_soft_max.`Score_1` AS `Score_1`, score_soft_max.`Score_2` AS `Score_2`, score_soft_max.`Score_3` AS `Score_3`, score_soft_max.`Score_4` AS `Score_4`, score_soft_max.`Score_5` AS `Score_5`, score_soft_max.`Score_6` AS `Score_6`, score_soft_max.`Score_7` AS `Score_7`, score_soft_max.`Score_8` AS `Score_8`, score_soft_max.`Score_9` AS `Score_9`, score_soft_max.`Proba_0` AS `Proba_0`, score_soft_max.`Proba_1` AS `Proba_1`, score_soft_max.`Proba_2` AS `Proba_2`, score_soft_max.`Proba_3` AS `Proba_3`, score_soft_max.`Proba_4` AS `Proba_4`, score_soft_max.`Proba_5` AS `Proba_5`, score_soft_max.`Proba_6` AS `Proba_6`, score_soft_max.`Proba_7` AS `Proba_7`, score_soft_max.`Proba_8` AS `Proba_8`, score_soft_max.`Proba_9` AS `Proba_9`, score_soft_max.`LogProba_0` AS `LogProba_0`, score_soft_max.`LogProba_1` AS `LogProba_1`, score_soft_max.`LogProba_2` AS `LogProba_2`, score_soft_max.`LogProba_3` AS `LogProba_3`, score_soft_max.`LogProba_4` AS `LogProba_4`, score_soft_max.`LogProba_5` AS `LogProba_5`, score_soft_max.`LogProba_6` AS `LogProba_6`, score_soft_max.`LogProba_7` AS `LogProba_7`, score_soft_max.`LogProba_8` AS `LogProba_8`, score_soft_max.`LogProba_9` AS `LogProba_9`, score_soft_max.`Decision` AS `Decision`, score_soft_max.`max_LogProba` AS `max_LogProba`, score_soft_max.`max_Proba` AS `max_Proba`, score_soft_max.`max_Score` AS `max_Score`, score_soft_max.`exp_delta_Score_0` AS `exp_delta_Score_0`, score_soft_max.`exp_delta_Score_1` AS `exp_delta_Score_1`, score_soft_max.`exp_delta_Score_2` AS `exp_delta_Score_2`, score_soft_max.`exp_delta_Score_3` AS `exp_delta_Score_3`, score_soft_max.`exp_delta_Score_4` AS `exp_delta_Score_4`, score_soft_max.`exp_delta_Score_5` AS `exp_delta_Score_5`, score_soft_max.`exp_delta_Score_6` AS `exp_delta_Score_6`, score_soft_max.`exp_delta_Score_7` AS `exp_delta_Score_7`, score_soft_max.`exp_delta_Score_8` AS `exp_delta_Score_8`, score_soft_max.`exp_delta_Score_9` AS `exp_delta_Score_9`, score_soft_max.`sum_ExpDeltaScore` AS `sum_ExpDeltaScore`, (SELECT min(score_class_union.class) AS min_1 
FROM score_class_union 
WHERE score_soft_max.`max_LogProba` = score_class_union.`LogProba` AND score_soft_max.`KEY` = score_class_union.`KEY`) AS `arg_max_LogProba`, (SELECT min(score_class_union.class) AS min_2 
FROM score_class_union 
WHERE score_soft_max.`max_Proba` = score_class_union.`Proba` AND score_soft_max.`KEY` = score_class_union.`KEY`) AS `arg_max_Proba`, (SELECT min(score_class_union.class) AS min_3 
FROM score_class_union 
WHERE score_soft_max.`max_Score` = score_class_union.`Score` AND score_soft_max.`KEY` = score_class_union.`KEY`) AS `arg_max_Score`, score_soft_max.`exp_delta_Score_0` / score_soft_max.`sum_ExpDeltaScore` AS `SoftProba_0`, score_soft_max.`exp_delta_Score_1` / score_soft_max.`sum_ExpDeltaScore` AS `SoftProba_1`, score_soft_max.`exp_delta_Score_2` / score_soft_max.`sum_ExpDeltaScore` AS `SoftProba_2`, score_soft_max.`exp_delta_Score_3` / score_soft_max.`sum_ExpDeltaScore` AS `SoftProba_3`, score_soft_max.`exp_delta_Score_4` / score_soft_max.`sum_ExpDeltaScore` AS `SoftProba_4`, score_soft_max.`exp_delta_Score_5` / score_soft_max.`sum_ExpDeltaScore` AS `SoftProba_5`, score_soft_max.`exp_delta_Score_6` / score_soft_max.`sum_ExpDeltaScore` AS `SoftProba_6`, score_soft_max.`exp_delta_Score_7` / score_soft_max.`sum_ExpDeltaScore` AS `SoftProba_7`, score_soft_max.`exp_delta_Score_8` / score_soft_max.`sum_ExpDeltaScore` AS `SoftProba_8`, score_soft_max.`exp_delta_Score_9` / score_soft_max.`sum_ExpDeltaScore` AS `SoftProba_9` 
FROM score_soft_max)
 SELECT arg_max_cte.`KEY` AS `KEY`, NULL AS `Score_0`, NULL AS `Score_1`, NULL AS `Score_2`, NULL AS `Score_3`, NULL AS `Score_4`, NULL AS `Score_5`, NULL AS `Score_6`, NULL AS `Score_7`, NULL AS `Score_8`, NULL AS `Score_9`, arg_max_cte.`SoftProba_0` AS `Proba_0`, arg_max_cte.`SoftProba_1` AS `Proba_1`, arg_max_cte.`SoftProba_2` AS `Proba_2`, arg_max_cte.`SoftProba_3` AS `Proba_3`, arg_max_cte.`SoftProba_4` AS `Proba_4`, arg_max_cte.`SoftProba_5` AS `Proba_5`, arg_max_cte.`SoftProba_6` AS `Proba_6`, arg_max_cte.`SoftProba_7` AS `Proba_7`, arg_max_cte.`SoftProba_8` AS `Proba_8`, arg_max_cte.`SoftProba_9` AS `Proba_9`, CASE WHEN (arg_max_cte.`SoftProba_0` IS NULL OR arg_max_cte.`SoftProba_0` > 0.0) THEN ln(arg_max_cte.`SoftProba_0`) ELSE -1.79769313486231e+308 END AS `LogProba_0`, CASE WHEN (arg_max_cte.`SoftProba_1` IS NULL OR arg_max_cte.`SoftProba_1` > 0.0) THEN ln(arg_max_cte.`SoftProba_1`) ELSE -1.79769313486231e+308 END AS `LogProba_1`, CASE WHEN (arg_max_cte.`SoftProba_2` IS NULL OR arg_max_cte.`SoftProba_2` > 0.0) THEN ln(arg_max_cte.`SoftProba_2`) ELSE -1.79769313486231e+308 END AS `LogProba_2`, CASE WHEN (arg_max_cte.`SoftProba_3` IS NULL OR arg_max_cte.`SoftProba_3` > 0.0) THEN ln(arg_max_cte.`SoftProba_3`) ELSE -1.79769313486231e+308 END AS `LogProba_3`, CASE WHEN (arg_max_cte.`SoftProba_4` IS NULL OR arg_max_cte.`SoftProba_4` > 0.0) THEN ln(arg_max_cte.`SoftProba_4`) ELSE -1.79769313486231e+308 END AS `LogProba_4`, CASE WHEN (arg_max_cte.`SoftProba_5` IS NULL OR arg_max_cte.`SoftProba_5` > 0.0) THEN ln(arg_max_cte.`SoftProba_5`) ELSE -1.79769313486231e+308 END AS `LogProba_5`, CASE WHEN (arg_max_cte.`SoftProba_6` IS NULL OR arg_max_cte.`SoftProba_6` > 0.0) THEN ln(arg_max_cte.`SoftProba_6`) ELSE -1.79769313486231e+308 END AS `LogProba_6`, CASE WHEN (arg_max_cte.`SoftProba_7` IS NULL OR arg_max_cte.`SoftProba_7` > 0.0) THEN ln(arg_max_cte.`SoftProba_7`) ELSE -1.79769313486231e+308 END AS `LogProba_7`, CASE WHEN (arg_max_cte.`SoftProba_8` IS NULL OR arg_max_cte.`SoftProba_8` > 0.0) THEN ln(arg_max_cte.`SoftProba_8`) ELSE -1.79769313486231e+308 END AS `LogProba_8`, CASE WHEN (arg_max_cte.`SoftProba_9` IS NULL OR arg_max_cte.`SoftProba_9` > 0.0) THEN ln(arg_max_cte.`SoftProba_9`) ELSE -1.79769313486231e+308 END AS `LogProba_9`, arg_max_cte.`arg_max_Score` AS `Decision` 
FROM arg_max_cte