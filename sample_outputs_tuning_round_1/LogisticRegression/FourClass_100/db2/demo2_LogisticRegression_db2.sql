-- This SQL code was generated by sklearn2sql (development version).
-- Copyright 2017

WITH linear_model_cte AS 
(SELECT "ADS"."KEY" AS "KEY", 0.01704207449878464 * "ADS"."Feature_0" + 0.01716316985273804 * "ADS"."Feature_1" + 0.0021465841814789963 * "ADS"."Feature_2" + 0.18153815829363115 * "ADS"."Feature_3" + -0.10990573254283022 * "ADS"."Feature_4" + 0.0008714058739430087 * "ADS"."Feature_5" + -0.0924020727499955 * "ADS"."Feature_6" + -0.05992673246123533 * "ADS"."Feature_7" + 0.010731277746995598 * "ADS"."Feature_8" + -0.040694109855711584 * "ADS"."Feature_9" + -0.09781995977876864 * "ADS"."Feature_10" + 0.05084475465306934 * "ADS"."Feature_11" + 0.009905626900399058 * "ADS"."Feature_12" + -0.016503006963425527 * "ADS"."Feature_13" + -0.01568011509568055 * "ADS"."Feature_14" + 0.32166005774979267 * "ADS"."Feature_15" + -0.030085301349158704 * "ADS"."Feature_16" + 0.009495497354199597 * "ADS"."Feature_17" + -0.11967652847066626 * "ADS"."Feature_18" + -0.011768436646122385 * "ADS"."Feature_19" + 0.09264357383047066 * "ADS"."Feature_20" + 0.09824123064804847 * "ADS"."Feature_21" + 0.03781512770109841 * "ADS"."Feature_22" + -0.0014200275470970091 * "ADS"."Feature_23" + 0.01869565706170517 * "ADS"."Feature_24" + -0.0022619623905159427 * "ADS"."Feature_25" + 0.04368504164457533 * "ADS"."Feature_26" + 0.024236663705175587 * "ADS"."Feature_27" + -0.005670114900736139 * "ADS"."Feature_28" + -0.02710617361251157 * "ADS"."Feature_29" + 0.21648148474740558 * "ADS"."Feature_30" + -0.05057953391862656 * "ADS"."Feature_31" + -0.11973042202529761 * "ADS"."Feature_32" + -0.004812107789175692 * "ADS"."Feature_33" + 0.07421488348339002 * "ADS"."Feature_34" + 0.03595287064271094 * "ADS"."Feature_35" + 0.010608843618289046 * "ADS"."Feature_36" + -0.005912140754867193 * "ADS"."Feature_37" + 0.009485058656406137 * "ADS"."Feature_38" + 0.0043745748656479734 * "ADS"."Feature_39" + -0.029512699307735465 * "ADS"."Feature_40" + -0.0067797966315621475 * "ADS"."Feature_41" + 0.017642535963768743 * "ADS"."Feature_42" + -0.026414552312557484 * "ADS"."Feature_43" + 0.02278672871555963 * "ADS"."Feature_44" + -5.84011439238551e-05 * "ADS"."Feature_45" + -0.037682532665002794 * "ADS"."Feature_46" + -0.06343632846907722 * "ADS"."Feature_47" + 0.0625149317579229 * "ADS"."Feature_48" + -0.018313271699529392 * "ADS"."Feature_49" + -0.04149727255935135 * "ADS"."Feature_50" + 0.020976636540901948 * "ADS"."Feature_51" + 0.05334738277610385 * "ADS"."Feature_52" + -0.026826874888715893 * "ADS"."Feature_53" + 0.03809770989729434 * "ADS"."Feature_54" + -0.006304515687747366 * "ADS"."Feature_55" + -0.003271799201380955 * "ADS"."Feature_56" + -0.013202438121378694 * "ADS"."Feature_57" + -0.037777217602643645 * "ADS"."Feature_58" + -0.04718383446989739 * "ADS"."Feature_59" + 0.0729507194708844 * "ADS"."Feature_60" + -0.030741450285391398 * "ADS"."Feature_61" + 0.14307258006858603 * "ADS"."Feature_62" + -0.013502822487149763 * "ADS"."Feature_63" + 0.014984137299805874 * "ADS"."Feature_64" + 0.01145964078007486 * "ADS"."Feature_65" + -0.07038833180440464 * "ADS"."Feature_66" + 0.12290930503552022 * "ADS"."Feature_67" + -0.024936985003766732 * "ADS"."Feature_68" + 0.05251638151322399 * "ADS"."Feature_69" + -0.04738941648026411 * "ADS"."Feature_70" + -0.05717504178036971 * "ADS"."Feature_71" + -0.14802734614485355 * "ADS"."Feature_72" + -0.0017691559283470378 * "ADS"."Feature_73" + -0.03731563099121908 * "ADS"."Feature_74" + 0.01197872785687238 * "ADS"."Feature_75" + -0.014817495230763433 * "ADS"."Feature_76" + -0.012132606521579443 * "ADS"."Feature_77" + 0.05114572706990933 * "ADS"."Feature_78" + 0.1210665771112083 * "ADS"."Feature_79" + -0.055638717275930255 * "ADS"."Feature_80" + -0.041080487888416985 * "ADS"."Feature_81" + -0.010714979714447253 * "ADS"."Feature_82" + -0.16242653960722472 * "ADS"."Feature_83" + -0.15212062963277362 * "ADS"."Feature_84" + -0.1482571431837622 * "ADS"."Feature_85" + 0.06330505500698856 * "ADS"."Feature_86" + -0.05115407860336184 * "ADS"."Feature_87" + 0.006072224555677564 * "ADS"."Feature_88" + 0.07813948997602914 * "ADS"."Feature_89" + -0.09562505162018842 * "ADS"."Feature_90" + -0.07505184144943185 * "ADS"."Feature_91" + -0.210112702778605 * "ADS"."Feature_92" + -0.03704072288510537 * "ADS"."Feature_93" + -0.058950514879500836 * "ADS"."Feature_94" + 0.07479133403018975 * "ADS"."Feature_95" + 0.0493130300335064 * "ADS"."Feature_96" + 0.022379041234035925 * "ADS"."Feature_97" + -0.20296921384122105 * "ADS"."Feature_98" + 0.26117239643545703 * "ADS"."Feature_99" + -0.0908736227245 AS "Score_0", -0.027703524567019102 * "ADS"."Feature_0" + -0.04631013297411155 * "ADS"."Feature_1" + -0.044256975863769206 * "ADS"."Feature_2" + 0.025995949860167022 * "ADS"."Feature_3" + -0.13295792088635952 * "ADS"."Feature_4" + -0.013618876315676242 * "ADS"."Feature_5" + 0.14281810570218728 * "ADS"."Feature_6" + -0.05160024178073349 * "ADS"."Feature_7" + -0.02361824701373174 * "ADS"."Feature_8" + 0.04098022229966561 * "ADS"."Feature_9" + -0.4058296354763861 * "ADS"."Feature_10" + -0.055298953083482046 * "ADS"."Feature_11" + -0.016318522756437328 * "ADS"."Feature_12" + -0.06100901367847746 * "ADS"."Feature_13" + 0.005245835070838447 * "ADS"."Feature_14" + -0.012214636974674706 * "ADS"."Feature_15" + 0.016345496428877823 * "ADS"."Feature_16" + -0.1632312275386943 * "ADS"."Feature_17" + -0.023472842733349982 * "ADS"."Feature_18" + -0.01704996233674697 * "ADS"."Feature_19" + -0.17122222399072912 * "ADS"."Feature_20" + 0.18714647048641864 * "ADS"."Feature_21" + 0.038080631064542216 * "ADS"."Feature_22" + -0.07774484797275578 * "ADS"."Feature_23" + -0.05902912242550844 * "ADS"."Feature_24" + 0.030126614223785087 * "ADS"."Feature_25" + -0.009527019332011956 * "ADS"."Feature_26" + 0.07380196114120899 * "ADS"."Feature_27" + 0.0831430770764681 * "ADS"."Feature_28" + -0.21382456703136096 * "ADS"."Feature_29" + 0.049379923158647074 * "ADS"."Feature_30" + -0.05960578189310704 * "ADS"."Feature_31" + 0.034538700353713106 * "ADS"."Feature_32" + 0.1813809151596037 * "ADS"."Feature_33" + -0.03375174912648305 * "ADS"."Feature_34" + -0.037870464551247006 * "ADS"."Feature_35" + -0.058625771692093084 * "ADS"."Feature_36" + -0.08867252438035712 * "ADS"."Feature_37" + 0.011100885492423912 * "ADS"."Feature_38" + 0.016673671537180933 * "ADS"."Feature_39" + 0.0028652224858305058 * "ADS"."Feature_40" + -0.09484276197282214 * "ADS"."Feature_41" + -0.07715570519265082 * "ADS"."Feature_42" + 0.023489188573054633 * "ADS"."Feature_43" + -0.012307187049513238 * "ADS"."Feature_44" + 0.11764806442440966 * "ADS"."Feature_45" + -0.006308861891732091 * "ADS"."Feature_46" + 0.03714352053634359 * "ADS"."Feature_47" + 0.08085850668342348 * "ADS"."Feature_48" + -0.028637680587573724 * "ADS"."Feature_49" + -0.08838130405583224 * "ADS"."Feature_50" + 0.0013422903188647108 * "ADS"."Feature_51" + 0.06904335910257808 * "ADS"."Feature_52" + 0.014096862692228753 * "ADS"."Feature_53" + 0.041511172164909994 * "ADS"."Feature_54" + 0.011454074691092293 * "ADS"."Feature_55" + 0.28801172363845795 * "ADS"."Feature_56" + 0.061283121165618896 * "ADS"."Feature_57" + -0.011070465646730527 * "ADS"."Feature_58" + 0.09015280574594592 * "ADS"."Feature_59" + 0.042612230144465156 * "ADS"."Feature_60" + -0.06368776432488686 * "ADS"."Feature_61" + 0.028236459698735634 * "ADS"."Feature_62" + -0.030006307051460897 * "ADS"."Feature_63" + -0.027238186424104274 * "ADS"."Feature_64" + -0.034602670635524635 * "ADS"."Feature_65" + -0.00501371148908814 * "ADS"."Feature_66" + 0.14174871877370007 * "ADS"."Feature_67" + 0.1655506564638166 * "ADS"."Feature_68" + -0.07809773344280306 * "ADS"."Feature_69" + -0.04386646722854561 * "ADS"."Feature_70" + 0.1442786624159787 * "ADS"."Feature_71" + 0.03550168837931553 * "ADS"."Feature_72" + -0.03911700763145518 * "ADS"."Feature_73" + 0.05829471652066033 * "ADS"."Feature_74" + 0.017118091812944044 * "ADS"."Feature_75" + -0.2775260940645829 * "ADS"."Feature_76" + -0.04856060019456424 * "ADS"."Feature_77" + 0.1412938927669748 * "ADS"."Feature_78" + -0.01522032967915379 * "ADS"."Feature_79" + -0.018925135718332015 * "ADS"."Feature_80" + -0.06060973007518617 * "ADS"."Feature_81" + 0.05614857780633227 * "ADS"."Feature_82" + -0.08357582560283636 * "ADS"."Feature_83" + 0.04297838083523868 * "ADS"."Feature_84" + 0.2277468315921459 * "ADS"."Feature_85" + 0.06738629306806561 * "ADS"."Feature_86" + 0.003255248311920365 * "ADS"."Feature_87" + -0.045448148025428466 * "ADS"."Feature_88" + 0.014365131652830841 * "ADS"."Feature_89" + 0.08250489414669075 * "ADS"."Feature_90" + -0.03308208859359729 * "ADS"."Feature_91" + 0.07178007534528773 * "ADS"."Feature_92" + 0.02766684540295237 * "ADS"."Feature_93" + 0.11383508905735419 * "ADS"."Feature_94" + 0.07044395685093609 * "ADS"."Feature_95" + 0.08068635851504871 * "ADS"."Feature_96" + -0.011561557669071335 * "ADS"."Feature_97" + -0.18585527004658695 * "ADS"."Feature_98" + -0.10525292761759791 * "ADS"."Feature_99" + -0.0677250645632 AS "Score_1", 0.01973068599924273 * "ADS"."Feature_0" + 0.0391447823515819 * "ADS"."Feature_1" + 0.06350345505776725 * "ADS"."Feature_2" + -0.09271923516813632 * "ADS"."Feature_3" + -0.07132041506764894 * "ADS"."Feature_4" + 0.014653582218708314 * "ADS"."Feature_5" + 0.18049778296745642 * "ADS"."Feature_6" + 0.03387956245892806 * "ADS"."Feature_7" + 0.006207675638074729 * "ADS"."Feature_8" + 0.03356059668012433 * "ADS"."Feature_9" + 0.07770501942727327 * "ADS"."Feature_10" + -0.024722904526055398 * "ADS"."Feature_11" + -0.05490250486277586 * "ADS"."Feature_12" + -0.02489678192609995 * "ADS"."Feature_13" + 0.03014611255303105 * "ADS"."Feature_14" + 0.0785850024311385 * "ADS"."Feature_15" + 0.03138748990580134 * "ADS"."Feature_16" + -0.24350487637424229 * "ADS"."Feature_17" + 0.13299735428512616 * "ADS"."Feature_18" + 0.018824028981901882 * "ADS"."Feature_19" + -0.014084822161844037 * "ADS"."Feature_20" + -0.02508206283581291 * "ADS"."Feature_21" + 0.03896493252320537 * "ADS"."Feature_22" + 0.05823381330741007 * "ADS"."Feature_23" + -0.06774654955939563 * "ADS"."Feature_24" + -0.012149480169957875 * "ADS"."Feature_25" + 0.047383224189366545 * "ADS"."Feature_26" + 0.05790677514042978 * "ADS"."Feature_27" + -0.021307306444435268 * "ADS"."Feature_28" + 0.10092226233312139 * "ADS"."Feature_29" + 0.11462691835887516 * "ADS"."Feature_30" + -0.09635643091621723 * "ADS"."Feature_31" + 0.1559488981051668 * "ADS"."Feature_32" + 0.110660638437654 * "ADS"."Feature_33" + 0.019501877936909176 * "ADS"."Feature_34" + 0.0044975576859646645 * "ADS"."Feature_35" + -0.02326574288915162 * "ADS"."Feature_36" + 0.04875223392090123 * "ADS"."Feature_37" + 0.03142244992631495 * "ADS"."Feature_38" + 0.08489628765893609 * "ADS"."Feature_39" + 0.01677136828056258 * "ADS"."Feature_40" + -0.08112380490545118 * "ADS"."Feature_41" + -0.016954217539482522 * "ADS"."Feature_42" + -0.15957454582393987 * "ADS"."Feature_43" + -0.012961068078538699 * "ADS"."Feature_44" + -0.035066366935555024 * "ADS"."Feature_45" + -0.03977341442801123 * "ADS"."Feature_46" + 0.06915887033083316 * "ADS"."Feature_47" + 0.03883115024969687 * "ADS"."Feature_48" + 0.07340089547478278 * "ADS"."Feature_49" + -0.02957891899810711 * "ADS"."Feature_50" + -0.034661109298961705 * "ADS"."Feature_51" + -0.2579230292779756 * "ADS"."Feature_52" + 0.0207620412463774 * "ADS"."Feature_53" + -0.0030119818500627406 * "ADS"."Feature_54" + -0.028122282016517834 * "ADS"."Feature_55" + -0.04906003226804903 * "ADS"."Feature_56" + -0.03584367522721496 * "ADS"."Feature_57" + -0.0645170138520818 * "ADS"."Feature_58" + 0.005632867451699613 * "ADS"."Feature_59" + 0.12013065319438167 * "ADS"."Feature_60" + -0.034630245512648025 * "ADS"."Feature_61" + -0.07093969485952034 * "ADS"."Feature_62" + -0.04804182635431352 * "ADS"."Feature_63" + 0.054275901917163985 * "ADS"."Feature_64" + 0.032914550148799494 * "ADS"."Feature_65" + -0.039135263696201995 * "ADS"."Feature_66" + 0.033034040101340444 * "ADS"."Feature_67" + -0.13825988763493777 * "ADS"."Feature_68" + 0.2446269902731345 * "ADS"."Feature_69" + -0.02139161735335888 * "ADS"."Feature_70" + -0.1203924130596855 * "ADS"."Feature_71" + 0.03243268949424793 * "ADS"."Feature_72" + 0.05262139598154303 * "ADS"."Feature_73" + 0.0017401931470626781 * "ADS"."Feature_74" + -0.037208276485953436 * "ADS"."Feature_75" + 0.04179161117588106 * "ADS"."Feature_76" + -0.005719245801165893 * "ADS"."Feature_77" + -0.07528248000451977 * "ADS"."Feature_78" + 0.01613999123393901 * "ADS"."Feature_79" + 0.01581400720002331 * "ADS"."Feature_80" + -0.001100275001710258 * "ADS"."Feature_81" + -0.059756085552961725 * "ADS"."Feature_82" + -0.07051785592773907 * "ADS"."Feature_83" + -0.260406816016373 * "ADS"."Feature_84" + -0.19475132703077433 * "ADS"."Feature_85" + -0.10881678116157399 * "ADS"."Feature_86" + -0.014170330776741851 * "ADS"."Feature_87" + 0.048670690492232736 * "ADS"."Feature_88" + 0.009111889237788932 * "ADS"."Feature_89" + 0.022363313852372724 * "ADS"."Feature_90" + 0.14621698154181462 * "ADS"."Feature_91" + -0.16058683159807569 * "ADS"."Feature_92" + -0.06034151690885664 * "ADS"."Feature_93" + -0.08744597972001074 * "ADS"."Feature_94" + -0.027644480796564008 * "ADS"."Feature_95" + 0.003511558026593763 * "ADS"."Feature_96" + -0.009499751476009514 * "ADS"."Feature_97" + 0.13548201896096182 * "ADS"."Feature_98" + 0.371284571410045 * "ADS"."Feature_99" + -0.0814038514207 AS "Score_2", 0.0020822473499023273 * "ADS"."Feature_0" + 0.009326603213792205 * "ADS"."Feature_1" + 0.01008133774742398 * "ADS"."Feature_2" + 0.004483138182602514 * "ADS"."Feature_3" + 0.03513051014900676 * "ADS"."Feature_4" + 0.03390870157820484 * "ADS"."Feature_5" + 0.03011422579484379 * "ADS"."Feature_6" + -0.027111614868090675 * "ADS"."Feature_7" + -0.0018009693535611208 * "ADS"."Feature_8" + 0.018752125903916866 * "ADS"."Feature_9" + -0.043947633603373615 * "ADS"."Feature_10" + -0.05538613406746818 * "ADS"."Feature_11" + 0.026352805008895062 * "ADS"."Feature_12" + -0.002455014942166378 * "ADS"."Feature_13" + 6.932548147730536e-05 * "ADS"."Feature_14" + -0.13042813367716258 * "ADS"."Feature_15" + 0.021608272422839185 * "ADS"."Feature_16" + -0.07574364092059538 * "ADS"."Feature_17" + 0.019978418060605803 * "ADS"."Feature_18" + 0.007349502101312639 * "ADS"."Feature_19" + 0.22460981845575995 * "ADS"."Feature_20" + -0.0015495544931844014 * "ADS"."Feature_21" + -0.017131089106575317 * "ADS"."Feature_22" + 0.0014790381942612807 * "ADS"."Feature_23" + -0.0908153711487562 * "ADS"."Feature_24" + 0.02698681658836977 * "ADS"."Feature_25" + -0.06250898642407962 * "ADS"."Feature_26" + -0.041709349569802316 * "ADS"."Feature_27" + -0.09561422889736042 * "ADS"."Feature_28" + -0.17939316557739943 * "ADS"."Feature_29" + 0.0545540355065109 * "ADS"."Feature_30" + -0.0656909859748159 * "ADS"."Feature_31" + -0.1984231868488332 * "ADS"."Feature_32" + -0.18185074593071576 * "ADS"."Feature_33" + 0.08398037335790215 * "ADS"."Feature_34" + -0.0007160962352819537 * "ADS"."Feature_35" + -0.004721948480928381 * "ADS"."Feature_36" + -0.01467709837884068 * "ADS"."Feature_37" + -0.021031062609184796 * "ADS"."Feature_38" + -0.043499841636324144 * "ADS"."Feature_39" + -0.018719883626524922 * "ADS"."Feature_40" + -0.09013742863367524 * "ADS"."Feature_41" + 0.007127931712345291 * "ADS"."Feature_42" + -0.12935207935617382 * "ADS"."Feature_43" + -0.016441578249377652 * "ADS"."Feature_44" + -0.14403816605539738 * "ADS"."Feature_45" + 0.055439177097243164 * "ADS"."Feature_46" + -0.0672884113867213 * "ADS"."Feature_47" + -0.22596644416957778 * "ADS"."Feature_48" + -0.18715304498155663 * "ADS"."Feature_49" + -0.053462221588466745 * "ADS"."Feature_50" + -7.135080109087053e-05 * "ADS"."Feature_51" + 0.039806605253196105 * "ADS"."Feature_52" + -0.02428654622925246 * "ADS"."Feature_53" + 0.07273431959725234 * "ADS"."Feature_54" + 0.04923351505564135 * "ADS"."Feature_55" + 0.09084609300450357 * "ADS"."Feature_56" + 0.028689403261616373 * "ADS"."Feature_57" + -0.011930145636357291 * "ADS"."Feature_58" + 0.06844843251832668 * "ADS"."Feature_59" + 0.09959834056225433 * "ADS"."Feature_60" + 0.01245869978054481 * "ADS"."Feature_61" + 0.1156371412422742 * "ADS"."Feature_62" + -0.013757701574565687 * "ADS"."Feature_63" + -0.0039108223422717235 * "ADS"."Feature_64" + -0.04779422661703889 * "ADS"."Feature_65" + 0.009300994600532467 * "ADS"."Feature_66" + -0.06349689084488538 * "ADS"."Feature_67" + 0.03330342320244012 * "ADS"."Feature_68" + 0.11165162639262578 * "ADS"."Feature_69" + 0.0644061330118777 * "ADS"."Feature_70" + 0.06908771135258082 * "ADS"."Feature_71" + -0.03690107176779623 * "ADS"."Feature_72" + 0.13585504554576033 * "ADS"."Feature_73" + 0.08355940576769438 * "ADS"."Feature_74" + 0.017730210772307093 * "ADS"."Feature_75" + -0.007521109650984343 * "ADS"."Feature_76" + -0.019320259995437638 * "ADS"."Feature_77" + -0.03654664380903642 * "ADS"."Feature_78" + -0.02473454176257885 * "ADS"."Feature_79" + 0.13747142650166594 * "ADS"."Feature_80" + -0.01665916541246921 * "ADS"."Feature_81" + 0.0021276864017016057 * "ADS"."Feature_82" + -0.12289714158123201 * "ADS"."Feature_83" + 0.177405592705616 * "ADS"."Feature_84" + 0.018980307043373803 * "ADS"."Feature_85" + 0.031991380913032344 * "ADS"."Feature_86" + 0.06384324816850079 * "ADS"."Feature_87" + 0.011607919038971924 * "ADS"."Feature_88" + -0.06626140141515784 * "ADS"."Feature_89" + -0.022143529040636357 * "ADS"."Feature_90" + -0.04157425490549415 * "ADS"."Feature_91" + 0.007070737223242249 * "ADS"."Feature_92" + -0.006780856774750929 * "ADS"."Feature_93" + -0.17368094386871266 * "ADS"."Feature_94" + 0.01609414128801717 * "ADS"."Feature_95" + -0.02094795424913107 * "ADS"."Feature_96" + -0.039119039674742485 * "ADS"."Feature_97" + -0.0012554265155502902 * "ADS"."Feature_98" + 0.19456530017776744 * "ADS"."Feature_99" + -0.0601520147774 AS "Score_3" 
FROM "FourClass_100" AS "ADS"), 
orig_cte AS 
(SELECT linear_model_cte."KEY" AS "KEY", linear_model_cte."Score_0" AS "Score_0", linear_model_cte."Score_1" AS "Score_1", linear_model_cte."Score_2" AS "Score_2", linear_model_cte."Score_3" AS "Score_3", (1.0 / (1.0 + exp(-linear_model_cte."Score_0"))) / (1.0 / (1.0 + exp(-linear_model_cte."Score_0")) + 1.0 / (1.0 + exp(-linear_model_cte."Score_1")) + 1.0 / (1.0 + exp(-linear_model_cte."Score_2")) + 1.0 / (1.0 + exp(-linear_model_cte."Score_3"))) AS "Proba_0", (1.0 / (1.0 + exp(-linear_model_cte."Score_1"))) / (1.0 / (1.0 + exp(-linear_model_cte."Score_0")) + 1.0 / (1.0 + exp(-linear_model_cte."Score_1")) + 1.0 / (1.0 + exp(-linear_model_cte."Score_2")) + 1.0 / (1.0 + exp(-linear_model_cte."Score_3"))) AS "Proba_1", (1.0 / (1.0 + exp(-linear_model_cte."Score_2"))) / (1.0 / (1.0 + exp(-linear_model_cte."Score_0")) + 1.0 / (1.0 + exp(-linear_model_cte."Score_1")) + 1.0 / (1.0 + exp(-linear_model_cte."Score_2")) + 1.0 / (1.0 + exp(-linear_model_cte."Score_3"))) AS "Proba_2", (1.0 / (1.0 + exp(-linear_model_cte."Score_3"))) / (1.0 / (1.0 + exp(-linear_model_cte."Score_0")) + 1.0 / (1.0 + exp(-linear_model_cte."Score_1")) + 1.0 / (1.0 + exp(-linear_model_cte."Score_2")) + 1.0 / (1.0 + exp(-linear_model_cte."Score_3"))) AS "Proba_3", CAST(NULL AS DOUBLE) AS "LogProba_0", CAST(NULL AS DOUBLE) AS "LogProba_1", CAST(NULL AS DOUBLE) AS "LogProba_2", CAST(NULL AS DOUBLE) AS "LogProba_3", NULL AS "Decision", CAST(NULL AS DOUBLE) AS "DecisionProba" 
FROM linear_model_cte), 
score_class_union AS 
(SELECT scu."KEY_u" AS "KEY_u", scu.class AS class, scu."LogProba" AS "LogProba", scu."Proba" AS "Proba", scu."Score" AS "Score" 
FROM (SELECT orig_cte."KEY" AS "KEY_u", 0 AS class, orig_cte."LogProba_0" AS "LogProba", orig_cte."Proba_0" AS "Proba", orig_cte."Score_0" AS "Score" 
FROM orig_cte UNION ALL SELECT orig_cte."KEY" AS "KEY_u", 1 AS class, orig_cte."LogProba_1" AS "LogProba", orig_cte."Proba_1" AS "Proba", orig_cte."Score_1" AS "Score" 
FROM orig_cte UNION ALL SELECT orig_cte."KEY" AS "KEY_u", 2 AS class, orig_cte."LogProba_2" AS "LogProba", orig_cte."Proba_2" AS "Proba", orig_cte."Score_2" AS "Score" 
FROM orig_cte UNION ALL SELECT orig_cte."KEY" AS "KEY_u", 3 AS class, orig_cte."LogProba_3" AS "LogProba", orig_cte."Proba_3" AS "Proba", orig_cte."Score_3" AS "Score" 
FROM orig_cte) AS scu), 
score_max AS 
(SELECT orig_cte."KEY" AS "KEY", orig_cte."Score_0" AS "Score_0", orig_cte."Score_1" AS "Score_1", orig_cte."Score_2" AS "Score_2", orig_cte."Score_3" AS "Score_3", orig_cte."Proba_0" AS "Proba_0", orig_cte."Proba_1" AS "Proba_1", orig_cte."Proba_2" AS "Proba_2", orig_cte."Proba_3" AS "Proba_3", orig_cte."LogProba_0" AS "LogProba_0", orig_cte."LogProba_1" AS "LogProba_1", orig_cte."LogProba_2" AS "LogProba_2", orig_cte."LogProba_3" AS "LogProba_3", orig_cte."Decision" AS "Decision", orig_cte."DecisionProba" AS "DecisionProba", max_select."KEY_m" AS "KEY_m", max_select."max_Proba" AS "max_Proba" 
FROM orig_cte LEFT OUTER JOIN (SELECT score_class_union."KEY_u" AS "KEY_m", max(score_class_union."Proba") AS "max_Proba" 
FROM score_class_union GROUP BY score_class_union."KEY_u") AS max_select ON orig_cte."KEY" = max_select."KEY_m"), 
union_with_max AS 
(SELECT score_class_union."KEY_u" AS "KEY_u", score_class_union.class AS class, score_class_union."LogProba" AS "LogProba", score_class_union."Proba" AS "Proba", score_class_union."Score" AS "Score", score_max."KEY" AS "KEY", score_max."Score_0" AS "Score_0", score_max."Score_1" AS "Score_1", score_max."Score_2" AS "Score_2", score_max."Score_3" AS "Score_3", score_max."Proba_0" AS "Proba_0", score_max."Proba_1" AS "Proba_1", score_max."Proba_2" AS "Proba_2", score_max."Proba_3" AS "Proba_3", score_max."LogProba_0" AS "LogProba_0", score_max."LogProba_1" AS "LogProba_1", score_max."LogProba_2" AS "LogProba_2", score_max."LogProba_3" AS "LogProba_3", score_max."Decision" AS "Decision", score_max."DecisionProba" AS "DecisionProba", score_max."KEY_m" AS "KEY_m", score_max."max_Proba" AS "max_Proba" 
FROM score_class_union LEFT OUTER JOIN score_max ON score_class_union."KEY_u" = score_max."KEY"), 
arg_max_cte AS 
(SELECT score_max."KEY" AS "KEY", score_max."Score_0" AS "Score_0", score_max."Score_1" AS "Score_1", score_max."Score_2" AS "Score_2", score_max."Score_3" AS "Score_3", score_max."Proba_0" AS "Proba_0", score_max."Proba_1" AS "Proba_1", score_max."Proba_2" AS "Proba_2", score_max."Proba_3" AS "Proba_3", score_max."LogProba_0" AS "LogProba_0", score_max."LogProba_1" AS "LogProba_1", score_max."LogProba_2" AS "LogProba_2", score_max."LogProba_3" AS "LogProba_3", score_max."Decision" AS "Decision", score_max."DecisionProba" AS "DecisionProba", score_max."KEY_m" AS "KEY_m", score_max."max_Proba" AS "max_Proba", "arg_max_t_Proba"."KEY_Proba" AS "KEY_Proba", "arg_max_t_Proba"."arg_max_Proba" AS "arg_max_Proba" 
FROM score_max LEFT OUTER JOIN (SELECT union_with_max."KEY" AS "KEY_Proba", min(union_with_max.class) AS "arg_max_Proba" 
FROM union_with_max 
WHERE union_with_max."max_Proba" <= union_with_max."Proba" GROUP BY union_with_max."KEY") AS "arg_max_t_Proba" ON score_max."KEY" = "arg_max_t_Proba"."KEY_Proba")
 SELECT arg_max_cte."KEY" AS "KEY", arg_max_cte."Score_0" AS "Score_0", arg_max_cte."Score_1" AS "Score_1", arg_max_cte."Score_2" AS "Score_2", arg_max_cte."Score_3" AS "Score_3", arg_max_cte."Proba_0" AS "Proba_0", arg_max_cte."Proba_1" AS "Proba_1", arg_max_cte."Proba_2" AS "Proba_2", arg_max_cte."Proba_3" AS "Proba_3", CASE WHEN (arg_max_cte."Proba_0" IS NULL OR arg_max_cte."Proba_0" > 0.0) THEN ln(arg_max_cte."Proba_0") ELSE -1.79769313486231e+308 END AS "LogProba_0", CASE WHEN (arg_max_cte."Proba_1" IS NULL OR arg_max_cte."Proba_1" > 0.0) THEN ln(arg_max_cte."Proba_1") ELSE -1.79769313486231e+308 END AS "LogProba_1", CASE WHEN (arg_max_cte."Proba_2" IS NULL OR arg_max_cte."Proba_2" > 0.0) THEN ln(arg_max_cte."Proba_2") ELSE -1.79769313486231e+308 END AS "LogProba_2", CASE WHEN (arg_max_cte."Proba_3" IS NULL OR arg_max_cte."Proba_3" > 0.0) THEN ln(arg_max_cte."Proba_3") ELSE -1.79769313486231e+308 END AS "LogProba_3", arg_max_cte."arg_max_Proba" AS "Decision", arg_max_cte."max_Proba" AS "DecisionProba" 
FROM arg_max_cte